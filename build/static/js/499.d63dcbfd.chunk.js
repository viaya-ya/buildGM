"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[499],{543:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowLeft.f7936a0e8650e337baf9f5e86cf7fa65.svg"},997:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(5043);const i={ul:"Lupa_ul__62RG9",li:"Lupa_li__pnKTR",activeText:"Lupa_activeText__DK-A7",completedText:"Lupa_completedText__68tEA"};var r=a(5933),n=a(579);function s(e){let{setIsOpenSearch:t,isOpenSearch:a,select:s,projects:o,archivesProjects:c,projectsWithProgram:u,archivesProjectsWithProgram:d,programs:v,archivesPrograms:m,array:p,arrayItem:h,positionBottomStyle:g,refLupa:D}=e;const x=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[t,D]),(0,n.jsxs)("div",{ref:x,children:[(0,n.jsx)("img",{ref:D,src:r.A,alt:"subbarSearch",onClick:()=>{t(!0)}}),a&&(0,n.jsxs)("ul",{className:i.ul,style:{bottom:g},children:[0!==(null===o||void 0===o?void 0:o.length)&&o&&(0,n.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===o||void 0===o?void 0:o.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===c||void 0===c?void 0:c.length)&&c&&(0,n.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===c||void 0===c?void 0:c.map((e=>(0,n.jsx)("li",{value:e.id,className:i.li,onClick:()=>{s(e.id),t(!1)},children:e.projectName},e.id))),0!==(null===u||void 0===u?void 0:u.length)&&u&&(0,n.jsx)("li",{value:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.activeText,children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===u||void 0===u?void 0:u.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===d||void 0===d?void 0:d.length)&&d&&(0,n.jsx)("li",{value:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.completedText,children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===d||void 0===d?void 0:d.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===v||void 0===v?void 0:v.length)&&v&&(0,n.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===v||void 0===v?void 0:v.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===m||void 0===m?void 0:m.length)&&m&&(0,n.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===m||void 0===m?void 0:m.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),null===p||void 0===p?void 0:p.map((e=>(0,n.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e[h]},e.id)))]})]})}},1268:(e,t,a)=>{a.d(t,{A:()=>u});a(5043);const l={editText:"BottomHeaders_editText__BUuuG"},i={wrapper:"ButtonAction_wrapper__S7EYo"};var r=a(3732),n=a(4530),s=a(9307),o=a(579);function c(e){let{create:t,update:a,refUpdate:l,refCreate:c}=e;return(0,o.jsxs)("div",{className:i.wrapper,children:[t&&(0,o.jsx)(s.A,{refAction:c,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:r.A,onClick:t}),a&&(0,o.jsx)(s.A,{refAction:l,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:n.A,onClick:a})]})}function u(e){let{children:t,create:a,update:i,refUpdate:r,refCreate:n}=e;return(0,o.jsxs)("div",{className:l.editText,children:[t,(0,o.jsx)(c,{create:a,update:i,refUpdate:r,refCreate:n})]})}},3066:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowRight.3daf16467905e170a2a5537d09a742a8.svg"},5933:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/subbarSearch.228587dc2f4983eef0e3a45c32fd687a.svg"},7214:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);const l={wave:"WaveLetters_wave__2Gves"};var i=a(579);function r(e){let{letters:t}=e;const a=t.split("");return(0,i.jsx)("div",{className:l.wave,children:null===a||void 0===a?void 0:a.map(((e,t)=>(0,i.jsx)("span",{style:{"--i":t+1},children:" "===e?"\xa0\xa0":e},t)))})}},7321:(e,t,a)=>{a.d(t,{$:()=>o});a(5043);const l={modal:"ModalSelectRadio_modal__NKc1b",modalWindow:"ModalSelectRadio_modalWindow__5RkFz",header:"ModalSelectRadio_header__6ISO7",item1:"ModalSelectRadio_item1__OXY0f",item2:"ModalSelectRadio_item2__V4lIS",search:"ModalSelectRadio_search__asvAb",exit:"ModalSelectRadio_exit__et8tp",table:"ModalSelectRadio_table__ZIpre",row:"ModalSelectRadio_row__smpE+"};var i=a(7583),r=a(4530),n=a(9307),s=a(579);function o(e){let{nameTable:t,handleSearchValue:a,handleSearchOnChange:o,exit:c,filterArray:u,array:d,arrayItem:v,selectedItemID:m,handleRadioChange:p,save:h}=e;return(0,s.jsx)("div",{className:l.modal,children:(0,s.jsxs)("div",{className:l.modalWindow,children:[(0,s.jsx)("img",{src:i.A,alt:"exitModal",onClick:()=>c(),className:l.exit}),(0,s.jsxs)("div",{className:l.header,children:[(0,s.jsx)("div",{className:l.item1,children:(0,s.jsx)("input",{type:"search",placeholder:"\u041d\u0430\u0439\u0442\u0438",value:a,onChange:o,className:l.search})}),h&&(0,s.jsx)("div",{className:l.item2,children:(0,s.jsx)(n.A,{name:"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:r.A,onClick:h})})]}),(0,s.jsxs)("table",{className:l.table,children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("th",{children:t})})}),u.length>0?(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===u||void 0===u?void 0:u.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>p(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})}):(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===d||void 0===d?void 0:d.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>p(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})})]})]})})}},8737:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var l=a(5043);const i={dialog:"Statistic_dialog__Cbu9i",header:"Statistic_header__pH+-5",fon:"Statistic_fon__JP7td",pomoshnikSearch:"Statistic_pomoshnikSearch__qnBb-",pomoshnik:"Statistic_pomoshnik__CQ0BG",iconBack:"Statistic_iconBack__m2V0j",search:"Statistic_search__TXcQi",spanPomoshnik:"Statistic_spanPomoshnik__6J8Y+",editText:"Statistic_editText__II05V",five:"Statistic_five__HK9Ts",iconAdd:"Statistic_iconAdd__MdvSu",iconSave:"Statistic_iconSave__Jua1O",image:"Statistic_image__3-PtP",main:"Statistic_main__SPIYw",blockArrrow:"Statistic_blockArrrow__tzFtl",block1:"Statistic_block1__UhU-B",block2:"Statistic_block2__8rOtS",block3:"Statistic_block3__LMeol",row2:"Statistic_row2__JK97+",row1:"Statistic_row1__lEqBa",element:"Statistic_element__SqAT-",addPoint:"Statistic_addPoint__DMwyp",deletePoint:"Statistic_deletePoint__ZllQj",points:"Statistic_points__qGb+h",item:"Statistic_item__x1Ly9",date:"Statistic_date__4vcFZ",number:"Statistic_number__AuAix",textGrey:"Statistic_textGrey__z7nKi",modal:"Statistic_modal__nbKgB",modalTable:"Statistic_modalTable__RWkRw",exitImage:"Statistic_exitImage__SmwEo",row:"Statistic_row__sT2iA",tableHeader:"Statistic_tableHeader__HNfWg",iconSaveModal:"Statistic_iconSaveModal__j06O9",itemHover:"Statistic_itemHover__BSWPU",active:"Statistic_active__BNbuW",itemName:"Statistic_itemName__DSZe6",select:"Statistic_select__yamP1",div:"Statistic_div__KBisZ",modalDelete:"Statistic_modalDelete__NWOfQ",modalDeleteElement:"Statistic_modalDeleteElement__iXQ6s",modalRow1:"Statistic_modalRow1__PnjBy",modalRow2:"Statistic_modalRow2__yZiju",btnYes:"Statistic_btnYes__5f-7E",btnNo:"Statistic_btnNo__3W1rx",textBtnYes:"Statistic_textBtnYes__z+BO-",textBtnNo:"Statistic_textBtnNo__Yjm0V",text:"Statistic_text__Lz4Hv",textMontserrat:"Statistic_textMontserrat__hbHUe",tableHeading:"Statistic_tableHeading__PlauL",tableHintWrapper:"Statistic_tableHintWrapper__N4ykR"};var r=a(9103);const n={block:"Graphic_block__5hOFr",row1:"Graphic_row1__I9Rbv"};var s=a(8053),o=a(579);const c=e=>{let{colorFirstPoint:t,data:a,name:i,setName:c,typeGraphic:u,type:d}=e;const v=(0,l.useRef)(),[m,p]=(0,l.useState)(i),[h,g]=(0,l.useState)(880),[D,x]=(0,l.useState)(600);return(0,l.useEffect)((()=>{p(i)}),[i]),(0,l.useEffect)((()=>{c(m)}),[m]),(0,l.useEffect)((()=>{const e=()=>{let e,t;"26"!==u&&u?"52"===u?window.innerWidth>1400?(e=1200,t=600):window.innerWidth>800&&(e=880,t=400):window.innerWidth>1400?(e=500,t=600):window.innerWidth>800&&(e=400,t=400):window.innerWidth>1400?(e=900,t=600):window.innerWidth>800&&(e=700,t=400),g(e),x(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[u]),(0,l.useEffect)((()=>{a.sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate)));const e=40,l=30,i=80,n=50,o=(r.jkA(a,(e=>e.value)),1.1*r.T9B(a,(e=>e.value))),c=r.hqK().domain(a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,u)))).range([n,h-l]).padding(0),m="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===d?r.m4Y().domain([0,o]).nice().range([e,D-i]):r.m4Y().domain([0,o]).nice().range([D-i,e]),p=r.n8j().x((e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,u)))).y((e=>m(e.value))).defined((e=>null!==e.value));r.Ltv(v.current).selectAll("*").remove();const g=r.Ltv(v.current).attr("width",h).attr("height",D),x=a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,u))),S=m.ticks(5);g.selectAll(".grid-vertical").data(x).enter().append("line").attr("class","grid-vertical").attr("x1",(e=>c(e))).attr("x2",(e=>c(e))).attr("y1",e).attr("y2",D-i).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3),g.selectAll(".grid-horizontal").data(S).enter().append("line").attr("class","grid-horizontal").attr("x1",n).attr("x2",h-l).attr("y1",(e=>m(e))).attr("y2",(e=>m(e))).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3);const _=r.l78(c);g.append("g").attr("transform",`translate(0,${D-i})`).call(_).selectAll("text").attr("transform","rotate(-90)").attr("text-anchor","end").attr("dx","-10px").attr("dy","-5px").style("font-weight","bold").style("font-size","12px"),g.append("g").attr("transform",`translate(${n},0)`).call(r.V4s(m).ticks(5).tickFormat(r.GPZ(".2s"))),a.forEach(((e,t)=>{if(t>0){const l=a[t-1].value,i="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===d?e.value<l?"blue":"red":e.value<l?"red":"blue";g.append("path").datum([a[t-1],e]).attr("fill","none").attr("stroke",i).attr("stroke-width",2).attr("d",p)}}));const f=(e,l)=>{if(0===l){if(void 0===t||null===t)return"blue";return e>=t?"blue":"red"}if(l>0){const t=a[l-1].value;return"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===d?e<t?"blue":"red":e<t?"red":"blue"}return"blue"};g.selectAll("circle").data(a).enter().append("circle").attr("cx",(e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,u)))).attr("cy",(e=>m(e.value))).attr("r",5).attr("fill",((e,t)=>f(e.value,t))).on("mouseover",((t,i)=>{r.Ltv(t.currentTarget).attr("r",7).attr("fill","orange");const o=c(""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(i.valueDate,u)),d=m(i.value)-15,v=`\u0414\u0430\u0442\u0430: ${""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(i.valueDate,u)}`,p=`\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435: ${i.value}`,D=6*Math.max(v.length,p.length),x=Math.max(120,D+20),S=d-50<e;let _=o;o+x/2>h-l?_=h-l-x/2:o-x/2<n&&(_=n+x/2);const w=S?d+50:d,y=f(i.value,a.indexOf(i)),j=g.append("g").attr("id","tooltip").attr("transform",`translate(${_}, ${w})`);j.append("rect").attr("x",-x/2).attr("y",S?0:-50).attr("width",x).attr("height",50).attr("fill",y).attr("rx",4).attr("ry",4),j.append("text").attr("text-anchor","middle").attr("y",S?15:-30).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(v),j.append("text").attr("text-anchor","middle").attr("y",S?35:-10).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(p)})).on("mouseout",(e=>{const t=r.Ltv(e.currentTarget).datum(),l=a.indexOf(t);r.Ltv(e.currentTarget).attr("r",5).attr("fill",f(t.value,l)),g.select("#tooltip").remove()}))}),[t,a,h,D,d]),(0,o.jsxs)("div",{className:n.block,children:[(0,o.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:n.row1}),(0,o.jsx)("svg",{ref:v,className:n.row2})]})};var u=a(4530),d=a(543),v=a(3066);const m=a.p+"static/media/trash.cf4b0aaeea7b410bb3b8b02d2a07d42f.svg";var p=a(3732),h=a(7383),g=a(6537),D=a(71),x=a(7583),S=a(7214),_=a(7422),f=a(1268),w=a(2941),y=a(917),j=a(997),N=a(7321),b=a(8877),T=a(3536),k=a.n(T),A=a(839),F=a(4863),M=a(4293);function Y(){var e,t,a,r,n,T,Y,I,C,$,O,E,R,L,P,B;const[W,z]=(0,l.useState)(),{reduxSelectedOrganizationId:G,reduxSelectedOrganizationReportDay:U,currentOrganization:H,isLoadingOrganizationId:K,isFetchingOrganizationId:J,updateOrganization:V,isLoadingUpdateOrganizationMutation:Z,isSuccessUpdateOrganizationMutation:q,isErrorUpdateOrganizationMutation:Q,ErrorOrganization:X,localIsResponseUpdateOrganizationMutation:ee}=(0,b.wL)(),[te,ae]=(0,l.useState)(!1),[le,ie]=(0,l.useState)(!1),[re,ne]=(0,l.useState)(""),[se,oe]=(0,l.useState)(),[ce,ue]=(0,l.useState)(),[de,ve]=(0,l.useState)(),[me,pe]=(0,l.useState)(""),[he,ge]=(0,l.useState)([]),[De,xe]=(0,l.useState)([]),[Se,_e]=(0,l.useState)([]),[fe,we]=(0,l.useState)(U);(0,l.useEffect)((()=>{void 0!==U&&null!==U&&we(U)}),[U]);const[ye,je]=(0,l.useState)("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"),[Ne,be]=(0,l.useState)(!1),[Te,ke]=(0,l.useState)([]),[Ae,Fe]=(0,l.useState)([]),[Me,Ye]=(0,l.useState)(!1),[Ie,Ce]=(0,l.useState)(null),[$e,Oe]=(0,l.useState)(0),[Ee,Re]=(0,l.useState)(!1),[Le,Pe]=(0,l.useState)(),[Be,We]=(0,l.useState)(),[ze,Ge]=(0,l.useState)([]),Ue=(0,l.useRef)(null),He=(0,l.useRef)(null),Ke=(0,l.useRef)(null),Je=(0,l.useRef)(null),Ve=(0,l.useRef)(null),Ze=(0,l.useRef)(null),qe=(0,l.useRef)(null),Qe=(0,l.useRef)(null),Xe=(0,l.useRef)(null),et=(0,l.useRef)(null),tt=(0,l.useRef)(null),at=(0,l.useRef)(null),lt=(0,l.useRef)(null),[it,rt]=(0,l.useState)(!1),nt=[{title:"\u041e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c",description:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c (\u041e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0443 \u0432\u0441\u0435\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438)",target:()=>Ue.current},{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",target:()=>et.current},{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",target:()=>tt.current},{title:"\u041d\u0430\u0437\u0430\u0434",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u0430 \u043d\u0430\u0437\u0430\u0434",target:()=>Ke.current,disabled:!re},{title:"\u0412\u043f\u0435\u0440\u0435\u0434",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u0430 \u0432\u043f\u0435\u0440\u0435\u0434",target:()=>Je.current,disabled:!re},{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0447\u043a\u0438 \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a",target:()=>at.current,disabled:!re},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438",target:()=>lt.current,disabled:!re},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",description:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",target:()=>He.current},{title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0441\u0442",target:()=>Ve.current},{title:"\u0422\u0438\u043f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",description:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0438\u043f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",target:()=>re?Ze.current:null,disabled:!re},{title:"\u041f\u043e\u0441\u0442",description:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u043e\u0441\u0442 \u0443 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",target:()=>re?qe.current:null,disabled:!re},{title:"\u0413\u0440\u0430\u0444\u0438\u043a",description:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0438\u043f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0433\u043e \u0433\u0440\u0430\u0444\u0438\u043a\u0430",target:()=>re?Qe.current:null,disabled:!re},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0430\u0444\u0438\u043a\u0430",target:()=>re?Xe.current:null,disabled:!re}].filter((e=>!e.disabled)),{statistics:st,isLoadingGetStatistics:ot,isFetchingGetStatistics:ct,isErrorGetStatistics:ut,currentStatistic:dt,statisticDatas:vt,isLoadingGetStatisticId:mt,isErrorGetStatisticId:pt,isFetchingGetStatisticId:ht,updateStatistics:gt,isLoadingUpdateStatisticMutation:Dt,isSuccessUpdateStatisticMutation:xt,isErrorUpdateStatisticMutation:St,ErrorUpdateStatisticMutation:_t,localIsResponseUpdateStatisticsMutation:ft,postStatistics:wt,isLoadingPostStatisticMutation:yt,isSuccessPostStatisticMutation:jt,isErrorPostStatisticMutation:Nt,ErrorPostStatisticMutation:bt,localIsResponsePostStatisticsMutation:Tt}=(0,b.SE)({statisticData:!0,statisticId:re}),{allPosts:kt,isLoadingGetPosts:At,isErrorGetPosts:Ft}=(0,b.es)(),{selectedID:Mt,handleRadioChange:Yt,handleInputChangeModalSearch:It,filterArraySearchModal:Ct,inputSearchModal:$t}=(0,b.I7)({array:kt,arrayItem:"postName"}),Ot=(e,t,a,l,i)=>{if("received"===e){const e=[...he];e[l][a]="value"===a?Number(t):t,ge(e)}else _e((e=>{const l=e.map((e=>e.id===i?"value"===a?{...e,value:Number(t)}:{...e,valueDate:t}:e));return l.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))),l}))};const Et=async()=>{var e;const t={};if(0!=Object.keys(dt).length){if(ce!==(null===dt||void 0===dt?void 0:dt.type)&&(t.type=ce),se!==(null===dt||void 0===dt?void 0:dt.name)&&(t.name=se),de!==(null===dt||void 0===dt||null===(e=dt.post)||void 0===e?void 0:e.id)&&(t.postId=de),me!==(null===dt||void 0===dt?void 0:dt.description)&&(t.description=me),Se.length>0){const e=Se.filter((e=>""!==e.value));if(e.length>0){const a=e.map((e=>({value:e.value,valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=a}}if(he.length>0){const e=function(e,t){const a=[];return t.forEach((t=>{const l=e.find((e=>e.id===t.id));if(l){const e={};["value","valueDate"].forEach((a=>{t[a]!==l[a]&&(e[a]="valueDate"==a?new Date(t[a]):t[a])})),Object.keys(e).length>0&&a.push({_id:t.id,...e})}})),a}(De,he);e.length>0&&(t.statisticDataUpdateDtos=[],t.statisticDataUpdateDtos.push(...e))}Object.keys(t).length>0&&await gt({statisticId:re,_id:re,...t}).unwrap().then((()=>{t.name,Re(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}};(0,l.useEffect)((()=>{be("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"!==ye)}),[ye]),(0,l.useEffect)((()=>{var e;null!==dt&&void 0!==dt&&dt.name&&oe(dt.name),null!==dt&&void 0!==dt&&dt.type&&ue(dt.type),null!==dt&&void 0!==dt&&dt.description&&pe(dt.description),null!==dt&&void 0!==dt&&null!==(e=dt.post)&&void 0!==e&&e.id&&ve(dt.post.id)}),[dt.id]);const Rt=()=>{const e=vt.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setFullYear((new Date).getFullYear()-12+$e))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{});return Object.keys(e).map((t=>{const{id:a,valueSum:l,year:i,month:r,correlationType:n}=e[t];return{id:a||null,valueDate:`${i}-${r}-${new Date(i,r,0).getDate()}`,value:l,correlationType:n}}))};(0,l.useEffect)((()=>{if(vt.length){if(ge([]),_e([]),xe([]),ke([]),Fe([]),Oe(0),Ge([]),"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===ye){var e;const t=new Date,a=t.getDay(),l=new Date(t);let i;i=a>=fe?a-fe:7-(fe-a),l.setDate(t.getDate()-i);const r=new Date(l);r.setDate(l.getDate()+7);const n=[];for(let e=new Date(l);e<r;e.setDate(e.getDate()+1))n.push(new Date(e).toISOString().split("T")[0]);const s=null===vt||void 0===vt||null===(e=vt.filter((e=>{const t=null!==e&&void 0!==e&&e.valueDate?new Date(e.valueDate):null;if(isNaN(null===t||void 0===t?void 0:t.getTime()))return!1;const a=l instanceof Date&&!isNaN(l.getTime()),i=r instanceof Date&&!isNaN(r.getTime());if(!a||!i)return!1;const n=t.toISOString().split("T")[0],s=l.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s<=n&&n<o&&null===e.correlationType})))||void 0===e?void 0:e.map((e=>{var t;return{...e,valueDate:null===(t=e.valueDate)||void 0===t?void 0:t.split("T")[0]}})),o=[],c=[],u=[];n.forEach((e=>{const t=s.find((t=>t.valueDate===e));t?(o.push(t),c.push({...t})):u.push({id:e,valueDate:e,value:""})})),o.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),c.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),u.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),xe(c),ge(o),_e(u),Lt(l)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye){const e=vt.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));Ge(e);const a=vt.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setMonth((new Date).getMonth()-13))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{}),l=[];for(let i=0;i<13;i++){var t;const e=new Date;e.setMonth(e.getMonth()-i);const r=`${e.getFullYear()}-${e.getMonth()+1}`;a[r]||(a[r]={valueSum:0,year:e.getFullYear(),month:e.getMonth()+1});const n=new Date(e.getFullYear(),e.getMonth()+1,0),s=n.getFullYear(),o=n.getMonth()+1,c=n.getDate();l.push({id:(null===(t=a[r])||void 0===t?void 0:t.id)||null,valueDate:`${s}-${o}-${c}`,value:a[r].valueSum,...a[r].correlationType?{correlationType:a[r].correlationType}:{}})}l.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),ge(l),Lt()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye){const e=vt.filter((e=>"\u0413\u043e\u0434"===e.correlationType));Ge(e);const t=Rt(),l=null===vt||void 0===vt?void 0:vt.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12<new Date(e.valueDate).getFullYear())),i=t.reduce(((e,t)=>{var a;const i=new Date(t.valueDate),r=`${i.getFullYear()}`,n=l.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return n&&!e[r]?(e[r]={id:t.id,valueSum:n.value,correlationType:n.correlationType},e):(e[r]||(e[r]={valueSum:0,year:i.getFullYear()}),null!==(a=e[r])&&void 0!==a&&a.correlationType||(e[r].valueSum+=t.value),e)}),{}),r=l.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}`;return new Date((new Date).setFullYear((new Date).getFullYear()-12))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),n=k().merge({},i,r),s=[];for(let o=0;o<12;o++){var a;const e=new Date;e.setFullYear(e.getFullYear()-o);const t=`${e.getFullYear()}`;n[t]||(n[t]={valueSum:0,year:e.getFullYear()}),s.push({id:(null===(a=n[t])||void 0===a?void 0:a.id)||null,valueDate:`${e.getFullYear()}-01-01`,value:n[t].valueSum,...n[t].correlationType?{correlationType:n[t].correlationType}:{}})}s.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),ge(s),Lt()}if("13"===ye||"26"===ye||"52"===ye){const e=new Date,t=new Date(e),a=new Date;a.setDate(e.getDate()-7*(Number(ye)+1));const l=parseInt(fe);if(isNaN(l))throw new Error("selectedDayOfWeek \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c.");const i=[];let r=new Date(a);for(;r.getDay()!==l;)r.setDate(r.getDate()+1);for(;r<=t;){const t=new Date(r);t.setDate(r.getDate()+7);const a=vt.filter((e=>{const a=new Date(e.valueDate),l=r<=a&&a<t&&null===e.correlationType;return l&&ke((t=>[...t,e])),l})).reduce(((e,t)=>e+t.value),0),l=new Date(t.getTime()+864e5);l<=e&&(ke((e=>e.map((e=>e.myID?{...e}:{...e,myID:l.toISOString().split("T")[0]})))),i.push({value:a,valueDate:l.toISOString().split("T")[0]})),r=t}ge(i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}}),[dt.id,mt,ht,ye]);const Lt=e=>{if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===ye){const t=new Date(e);t.setDate(t.getDate()+($e-1));const a=vt.find((e=>new Date(e.valueDate).toISOString().split("T")[0]===t.toISOString().split("T")[0]));z(null===a||void 0===a?void 0:a.value)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye){const e=vt.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`,i=new Date;i.setMonth(i.getMonth()-13+$e);const r=new Date;var n;(r.setMonth(r.getMonth()-12+$e),!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&a>=i&&a<=r)&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(n=e[l])&&void 0!==n&&n.correlationType||(e[l].valueSum+=t.value));return e}),{}),t=Object.values(e)[0];console.log("firstMonthData",t),t&&z(t.valueSum)}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye){const e=Rt(),t=(new Date).getFullYear()-12+$e,a=null===vt||void 0===vt?void 0:vt.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&t==new Date(e.valueDate).getFullYear())),l=e.reduce(((e,t)=>{var l;const i=new Date(t.valueDate),r=`${i.getFullYear()}`,n=a.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return n&&!e[r]?(e[r]={id:t.id,valueSum:n.value,correlationType:n.correlationType},e):(e[r]||(e[r]={valueSum:0,year:i.getFullYear()}),null!==(l=e[r])&&void 0!==l&&l.correlationType||(e[r].valueSum+=t.value),e)}),{}),i=a.reduce(((e,a)=>{const l=new Date(a.valueDate).getFullYear(),i=`${l}`;return t===l&&(e[i]||(e[i]={id:a.id,valueSum:a.value,correlationType:a.correlationType})),e}),{}),r=k().merge({},l,i),n=Object.values(r)[0];console.log("firstYearData",n),n&&z(n.valueSum)}};(0,l.useEffect)((()=>{(()=>{if(ge([]),ke([]),Fe([]),Ge([]),vt.length){if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===ye){const e=new Date,t=e.getDay(),a=new Date(e);let l;l=t>=fe?t-fe:7-(fe-t),a.setDate(e.getDate()-l);const i=new Date(e);i.setDate(e.getDate()-7),a<i&&a.setTime(i.getTime());const r=[];for(let d=$e;d<7+$e;d++){const t=new Date(a);t.setDate(e.getDate()+d),r.push(t.toISOString().split("T")[0]),d===$e&&Lt(a)}const n=vt.reduce(((e,t)=>{const a=t.valueDate.split("T")[0];return t.correlationType||(e[a]={...t,valueDate:a}),e}),{}),s=r.map((e=>n[e]&&null===n[e].correlationType?n[e]:{id:e,valueDate:e,value:""})),o=s.filter((e=>""===e.value)),c=s.filter((e=>""!==e.value)),u=c.map((e=>({...e})));xe(u),ge(c),_e(o)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye){const t=vt.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));Ge(t);const a=vt.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;return!isNaN(a)&&new Date((new Date).setMonth((new Date).getMonth()-14+$e))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value)),e}),{}),l=[];for(let i=(new Date).getMonth()-14+$e;i<=$e;i++){var e;const t=new Date;t.setMonth(t.getMonth()+i);const r=`${t.getFullYear()}-${t.getMonth()+1}`;a[r]||(a[r]={valueSum:0,year:t.getFullYear(),month:t.getMonth()+1});const n=new Date(t.getFullYear(),t.getMonth()+1,0),s=n.getFullYear(),o=n.getMonth()+1,c=n.getDate();l.push({id:(null===(e=a[r])||void 0===e?void 0:e.id)||null,valueDate:`${s}-${o}-${c}`,value:a[r].valueSum,...a[r].correlationType?{correlationType:a[r].correlationType}:{}})}l.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),ge(l),Lt()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye){const e=vt.filter((e=>"\u0413\u043e\u0434"===e.correlationType));Ge(e);const a=Rt(),l=null===vt||void 0===vt?void 0:vt.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12+$e<new Date(e.valueDate).getFullYear())),i=a.reduce(((e,t)=>{var a;const i=new Date(t.valueDate),r=`${i.getFullYear()}`,n=l.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return n&&!e[r]?(e[r]={id:t.id,valueSum:n.value,correlationType:n.correlationType},e):(e[r]||(e[r]={valueSum:0,year:i.getFullYear()}),null!==(a=e[r])&&void 0!==a&&a.correlationType||(e[r].valueSum+=t.value),e)}),{}),r=l.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}`;return new Date((new Date).setFullYear((new Date).getFullYear()-12+$e))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),n=k().merge({},i,r),s=[];for(let o=(new Date).getFullYear()-11+$e;o<=(new Date).getFullYear()+$e;o++){var t;const e=new Date;e.setFullYear(o);const a=`${e.getFullYear()}`;n[a]||(n[a]={valueSum:0,year:e.getFullYear()}),s.push({id:(null===(t=n[a])||void 0===t?void 0:t.id)||null,valueDate:`${e.getFullYear()}-01-01`,value:n[a].valueSum,...n[a].correlationType?{correlationType:n[a].correlationType}:{}})}s.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),console.log("updatedYearPoints",s),ge(s)}if("13"===ye||"26"===ye||"52"===ye){const e=new Date;e.setDate(e.getDate()+7*$e);const t=new Date(e),a=new Date(t);a.setDate(t.getDate()-7*(Number(ye)+1));const l=parseInt(fe),i=[];let r=new Date(a),n=0;for(;r.getDay()!==l;)r.setDate(r.getDate()+1);for(;r<=t;){const t=new Date(r);t.setDate(r.getDate()+7),n=vt.filter((e=>{const a=new Date(e.valueDate);return r<=a&&a<t&&null===e.correlationType&&ke((t=>[...t,e])),r<=a&&a<t&&null===e.correlationType})).reduce(((e,t)=>e+t.value),0);const a=new Date(t.getTime()+864e5);a<=e&&(ke((e=>e.map((e=>e.myID?{...e}:{...e,myID:a.toISOString().split("T")[0]})))),i.push({value:n,valueDate:a.toISOString().split("T")[0]})),r=t}ge(i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}})()}),[$e]);const Pt=(e,t)=>{switch(Number(e)){case 0:t("\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435");break;case 1:t("\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a");break;case 2:t("\u0412\u0442\u043e\u0440\u043d\u0438\u043a");break;case 3:t("\u0421\u0440\u0435\u0434\u0430");break;case 4:t("\u0427\u0435\u0442\u0432\u0435\u0440\u0433");break;case 5:t("\u041f\u044f\u0442\u043d\u0438\u0446\u0430");break;case 6:t("\u0421\u0443\u0431\u0431\u043e\u0442\u0430")}},Bt=async()=>{await V({_id:G,reportDay:Number(fe)}).unwrap().then((()=>{Re(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},Wt=e=>{ne(e)};return(0,o.jsxs)("div",{className:i.dialog,children:[(0,o.jsx)(_.A,{name:"\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",funcActiveHint:()=>rt(!0),children:(0,o.jsx)(f.A,{create:()=>{ae(!0)},update:()=>{console.log(`reportDay =${fe}`),console.log(`currentOrganization?.reportDay =${null===H||void 0===H?void 0:H.reportDay}`),fe!=(null===H||void 0===H?void 0:H.reportDay)?(Re(!0),Pt(fe,Pe),Pt(null===H||void 0===H?void 0:H.reportDay,We)):Et()},refCreate:et,refUpdate:tt,children:(0,o.jsx)(w.A,{refSelect:Ue,name:"\u041e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c",value:fe,onChange:we,array:[{id:1,value:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a"},{id:2,value:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a"},{id:3,value:"\u0421\u0440\u0435\u0434\u0430"},{id:4,value:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433"},{id:5,value:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430"},{id:6,value:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430"},{id:0,value:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"}],arrayItem:"value"})})}),(0,o.jsx)(A.Ay,{locale:M.A,children:(0,o.jsx)(F.A,{open:it,onClose:()=>rt(!1),steps:nt})}),(0,o.jsx)("div",{className:i.main,children:ut&&Ft?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(D.A,{Error:ut||Ft})}):(0,o.jsx)(o.Fragment,{children:pt?(0,o.jsx)(D.A,{Error:pt}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D.A,{Loading:ot,Fetching:ct}),(0,o.jsx)(D.A,{Loading:At}),ht||mt?(0,o.jsx)(D.A,{Loading:mt,Fetching:ht}):(0,o.jsxs)(o.Fragment,{children:[dt.id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:i.block1,children:[(0,o.jsx)(c,{colorFirstPoint:W,data:[...he,...Se],name:se,setName:oe,typeGraphic:ye,type:ce}),(0,o.jsxs)("div",{className:i.blockArrrow,children:[(0,o.jsx)("div",{ref:Ke,className:i.statisticsArrow,children:(0,o.jsx)("img",{src:d.A,alt:"statisticsArrowLeftWhite",onClick:()=>{Oe((e=>e-1))}})}),(0,o.jsx)("div",{ref:Je,className:i.statisticsArrow,children:(0,o.jsx)("img",{src:v.A,alt:"statisticsArrowRightWhite",onClick:()=>{Oe((e=>e+1))}})})]})]}),(0,o.jsxs)("div",{className:i.block2,children:[(0,o.jsx)("div",{ref:at,className:i.addPoint,onClick:()=>{_e((e=>[{valueDate:"",value:0,id:new Date},...e]))},children:(0,o.jsx)("img",{src:p.A,alt:"addBlock"})}),""!==re?(0,o.jsxs)("div",{className:i.points,children:[null===Se||void 0===Se||null===(e=Se.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))))||void 0===e?void 0:e.map(((e,t)=>(""===e.valueDate&&(e.valueDate=(new Date).toISOString().split("T")[0]),(0,o.jsxs)("div",{className:i.item,children:[(0,o.jsx)("input",{type:"date",value:e.valueDate,onChange:t=>{Ot("",t.target.value,"valueDate",null,e.id)},className:i.date}),(0,o.jsx)("input",{type:"text",value:e.value,inputMode:"numeric",placeholder:"\u2014",onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,"");Ot("",a,"value",null,e.id)},className:i.number})]},t)))),null===he||void 0===he?void 0:he.map(((e,t)=>"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===ye?(0,o.jsxs)("div",{className:i.item,children:[(0,o.jsx)("input",{type:"date",value:e.valueDate,onChange:e=>{Ot("received",e.target.value,"valueDate",t,null)},className:`${i.date}`,disabled:Ne}),(0,o.jsx)("input",{type:"text",value:e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");Ot("received",a,"value",t,null)},className:i.number,disabled:Ne})]},t):(0,o.jsxs)("div",{className:`${i.item}  ${i.itemHover}  ${Ie===t?i.active:""}`,onClick:()=>{Ce(t),(e=>{Ye(!0);const t=new Date(e);let a=new Date(e);if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye){const e=ze.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Fe(e):Fe((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye){const e=ze.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Fe(e):Fe((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"!==ye&&"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"!==ye){a.setDate(t.getDate()-7);const l=Te.filter((t=>t.myID===e)).sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate))),i=[];if(l.length<7){for(;a<t;){const e=l.find((e=>new Date(e.valueDate).toDateString()===a.toDateString()));e?i.push(e):i.push({valueDate:a.toISOString(),value:""}),a.setDate(a.getDate()+1)}Fe(i)}else Fe(l)}})(e.valueDate)},children:[(0,o.jsx)("span",{disabled:Ne,className:`${i.date} ${i.textGrey}`,children:(0,s.A)(e.valueDate,ye)}),(0,o.jsx)("span",{className:`${i.number} ${i.textGrey}`,disabled:Ne,children:e.value})]},t)))]}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)("div",{ref:lt,className:i.deletePoint,onClick:()=>{_e((e=>e.slice(0,-1)))},children:(0,o.jsx)("img",{src:m,alt:"trash"})})]}),(0,o.jsxs)("div",{className:i.block3,children:[(0,o.jsxs)("div",{className:i.row1,children:[(0,o.jsx)(y.A,{refInput:He,name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:se,onChange:oe,children:(0,o.jsx)(j.A,{refLupa:Ve,setIsOpenSearch:ie,isOpenSearch:le,select:Wt,array:st,arrayItem:"name",positionBottomStyle:"0"})}),(0,o.jsx)(w.A,{refSelect:Ze,name:"\u0422\u0438\u043f",value:ce,onChange:ue,array:[{id:"\u041f\u0440\u044f\u043c\u0430\u044f",value:"\u041f\u0440\u044f\u043c\u0430\u044f"},{id:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f",value:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"}],arrayItem:"value"}),(0,o.jsx)(w.A,{refSelect:qe,name:"\u041f\u043e\u0441\u0442",value:de,onChange:ve,array:kt,arrayItem:"postName"}),(0,o.jsx)(w.A,{refSelect:Qe,name:"\u0413\u0440\u0430\u0444\u0438\u043a",value:ye,onChange:je,array:[{id:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",value:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",view:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"},{id:"13",value:"13",view:"13 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"26",value:"26",view:"26 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"52",value:"52",view:"52 \u043d\u0435\u0434\u0435\u043b\u0438"}],arrayItem:"view"})]}),(0,o.jsx)("div",{className:i.row2,children:(0,o.jsx)("textarea",{ref:Xe,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c",value:me,onChange:e=>pe(e.target.value),className:i.textMontserrat})})]}),(0,o.jsx)(g.A,{Loading:yt,Error:Nt&&Tt,Success:jt&&Tt,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==bt&&void 0!==bt&&null!==(t=bt.data)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&null!==(n=r.errors)&&void 0!==n&&n[0]?bt.data.errors[0].errors[0]:null===bt||void 0===bt||null===(T=bt.data)||void 0===T?void 0:T.message}),(0,o.jsx)(g.A,{Loading:Dt,Error:St&&ft,Success:xt&&ft,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==_t&&void 0!==_t&&null!==(Y=_t.data)&&void 0!==Y&&null!==(I=Y.errors)&&void 0!==I&&null!==(C=I[0])&&void 0!==C&&null!==($=C.errors)&&void 0!==$&&$[0]?_t.data.errors[0].errors[0]:null===_t||void 0===_t||null===(O=_t.data)||void 0===O?void 0:O.message}),Me&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:i.modal,children:(0,o.jsxs)("table",{className:i.modalTable,children:[(0,o.jsxs)("div",{className:i.tableHeader,children:["\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye?(0,o.jsxs)("div",{className:i.tableHeading,children:[(0,o.jsx)("span",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430 \u043c\u0435\u0441\u044f\u0446"}),(0,o.jsx)("div",{className:i.tableHintWrapper,children:(0,o.jsx)("img",{src:h.A,alt:"hint",className:i.tableHint})})]}):(0,o.jsx)("div",{className:""}),(0,o.jsx)("div",{className:i.iconSaveModal,children:(0,o.jsx)("img",{src:u.A,alt:"Blacksavetmp",className:i.image,onClick:()=>{(async e=>{const t={};if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye)if(e[0].id){const a=e.map((e=>({_id:e.id,value:e.value,valueDate:e.valueDate,..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye?{correlationType:e.correlationType}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye?{correlationType:e.correlationType}:{}})));t.statisticDataUpdateDtos=a}else{const a=e.map((e=>({...e,valueDate:new Date(e.valueDate),..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye?{correlationType:e.correlationType}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye?{correlationType:e.correlationType}:{}})));t.statisticDataCreateDtos=a}else{const a=e.filter((e=>""!=e.value)),l=a.filter((e=>!e.id)),i=a.filter((e=>e.id)).map((e=>({_id:e.id,value:e.value,valueDate:e.valueDate})));if(l.length>0){const e=l.map((e=>({...e,valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=e}i.length>0&&(t.statisticDataUpdateDtos=i)}await gt({statisticId:re,_id:re,...t}).unwrap().then((()=>{Ye(!1),Ce(null)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})(Ae)}})})]}),(0,o.jsx)("img",{src:x.A,alt:"exit",onClick:()=>{Fe([]),Ce(null),Ye(!1)},className:i.exitImage}),(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),(0,o.jsx)("th",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:null===Ae||void 0===Ae?void 0:Ae.map((e=>(0,o.jsx)("div",{className:i.row,children:(0,o.jsx)("span",{className:`${i.date} ${i.textGrey}`,children:(0,s.A)(e.valueDate,ye)})},e.id)))}),(0,o.jsx)("td",{children:null===Ae||void 0===Ae?void 0:Ae.map(((e,t)=>(0,o.jsx)("div",{className:i.row,children:(0,o.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"\u2014",value:null===e.value||""===e.value?"":e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");((e,t)=>{if(t<0||t>=Ae.length)return;const a=Ae.map((e=>({...e})));a[t]={...a[t],value:null===e?"":Number(e),..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===ye?{correlationType:"\u0413\u043e\u0434"}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===ye?{correlationType:"\u041c\u0435\u0441\u044f\u0446"}:{}},Fe(a)})(""===a?null:a,t)}})},e.id)))})]})})]})})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.A,{letters:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),(0,o.jsx)("div",{className:i.block1}),(0,o.jsx)("div",{className:i.block2}),(0,o.jsxs)("div",{className:i.block3,children:[(0,o.jsx)("div",{className:i.row1,children:(0,o.jsx)(y.A,{refInput:He,name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:se,onChange:oe,children:(0,o.jsx)(j.A,{refLupa:Ve,setIsOpenSearch:ie,isOpenSearch:le,select:Wt,array:st,arrayItem:"name",positionBottomStyle:"0"})})}),(0,o.jsx)("div",{className:i.row2,children:(0,o.jsx)("textarea",{disabled:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})]})]}),Ee&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:i.modalDelete,children:(0,o.jsxs)("div",{className:i.modalDeleteElement,children:[(0,o.jsx)("img",{src:x.A,alt:"exit",className:i.exitImage,onClick:()=>Re(!1)}),(0,o.jsx)("div",{className:i.modalRow1,children:(0,o.jsxs)("span",{className:i.text,children:["\u0412\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438 \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0441 ",(0,o.jsx)("span",{children:" "}),(0,o.jsx)("span",{style:{fontWeight:"700"},children:Be}),(0,o.jsx)("span",{children:" \u043d\u0430 "}),(0,o.jsx)("span",{style:{fontWeight:"700"},children:Le}),". \u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435, \u0442\u043e \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0443 \u0432\u0441\u0435\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438."]})}),(0,o.jsxs)("div",{className:i.modalRow2,children:[(0,o.jsx)("button",{className:`${i.btnYes} ${i.textBtnYes}`,onClick:async()=>{try{await Bt(),localStorage.setItem("reportDay",Number(fe)),Re(!1),await new Promise((e=>setTimeout(e,1500))),await Et()}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439:",e)}},children:"\u0414\u0430"}),(0,o.jsx)("button",{className:`${i.btnNo} ${i.textBtnNo}`,onClick:()=>{Et()},children:"\u041d\u0435\u0442"})]})]})})}),(0,o.jsx)(g.A,{Loading:Z,Error:Q&&ee,Success:q&&ee,textSuccess:`\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0441\u044f \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0443 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 ${Le}`,textError:null!==X&&void 0!==X&&null!==(E=X.data)&&void 0!==E&&null!==(R=E.errors)&&void 0!==R&&null!==(L=R[0])&&void 0!==L&&null!==(P=L.errors)&&void 0!==P&&P[0]?X.data.errors[0].errors[0]:null===X||void 0===X||null===(B=X.data)||void 0===B?void 0:B.message}),te&&(0,o.jsx)(N.$,{nameTable:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430",handleSearchValue:$t,handleSearchOnChange:It,handleRadioChange:Yt,exit:()=>{ae(!1)},filterArray:Ct,array:kt,arrayItem:"postName",selectedItemID:Mt,save:async()=>{await wt({name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",postId:Mt}).unwrap().then((e=>{ne(e.id),ae(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}})]})]})})})]})}}}]);
//# sourceMappingURL=499.d63dcbfd.chunk.js.map