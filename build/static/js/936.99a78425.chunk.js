"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[936],{1268:(e,t,a)=>{a.d(t,{A:()=>c});a(5043);const o={editText:"BottomHeaders_editText__6e9Ca"},n={wrapper:"ButtonAction_wrapper__YWbBU"};var r=a(3732),l=a(4530),i=a(9307),s=a(579);function d(e){let{create:t,update:a,refUpdate:o,refCreate:d}=e;return(0,s.jsxs)("div",{className:n.wrapper,children:[t&&(0,s.jsx)(i.A,{refAction:d,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:r.A,onClick:t}),a&&(0,s.jsx)(i.A,{refAction:o,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:l.A,onClick:a})]})}function c(e){let{children:t,create:a,update:n,refUpdate:r,refCreate:l}=e;return(0,s.jsxs)("div",{className:o.editText,children:[t,(0,s.jsx)(d,{create:a,update:n,refUpdate:r,refCreate:l})]})}},1818:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);const o={textArea:"TextArea_textArea__dawEa",textColor:"TextArea_textColor__qu0hR"};var n=a(579);function r(e){let{value:t,onChange:a,readOnly:r}=e;return(0,n.jsx)("textarea",{className:"".concat(o.textArea," ").concat(r?o.textColor:""),value:t,onChange:e=>a(e.target.value),disabled:r})}},3936:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var o=a(9379),n=a(5043);const r={dialog:"Goal_dialog__6T5Zq",pomoshnik:"Goal_pomoshnik__nPLze",iconBack:"Goal_iconBack__0vbkY",search:"Goal_search__6H3H6",spanPomoshnik:"Goal_spanPomoshnik__fWtt2",one:"Goal_one__TP+-k",two:"Goal_two__EzEW-",three:"Goal_three__P509y",five:"Goal_five__V7CC4",seven:"Goal_seven__KSEyd",sixth:"Goal_sixth__V2NHE",iconAdd:"Goal_iconAdd__iBFoA",iconSave:"Goal_iconSave__vpJxM",iconPrint:"Goal_iconPrint__S3TJj",image:"Goal_image__qdsTd",blockSelect:"Goal_blockSelect__Gompo",option:"Goal_option__OFGvm",four:"Goal_four__6W1Qk",main:"Goal_main__jN+Ba",editorContainer:"Goal_editorContainer__V6-xQ",deleteIcon:"Goal_deleteIcon__Poonn",add:"Goal_add__6-qwo",nameButton:"Goal_nameButton__MbChn",highlight:"Goal_highlight__Rr5NZ",selectImage:"Goal_selectImage__Ql+b+",select:"Goal_select__50Kql"};const l=a.p+"static/media/drag.a3c69099094630ca6a8f439730092be5.svg";const i=a.p+"static/media/delete.538f360ca433be0382c8ed66f1d3368e.svg";var s=a(6537),d=a(71),c=a(9742),_=a(1818),u=a(7422),g=a(1268),p=a(8877),h=a(839),x=a(4863),f=a(4293),v=a(579);function m(){var e,t,a,m,G,j,A,C,L,k;const[E,b]=(0,n.useState)([]),w=(0,n.useRef)(null),S=(0,n.useRef)(null),N=(0,n.useRef)(null),P=(0,n.useRef)(null),[y,B]=(0,n.useState)(!1),M=[{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>P.current},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438",target:()=>E.length>0?w.current:null,disabled:!E.length},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",description:"\u0423\u0434\u0430\u043b\u0438\u0442\u0435 \u0447\u0430\u0441\u044c \u0446\u0435\u043b\u0438",target:()=>E.length>0?S.current:null,disabled:!E.length},{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",description:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438",target:()=>N.current}].filter((e=>!e.disabled)),{reduxSelectedOrganizationId:I,currentGoal:R,isErrorGetGoal:U,isLoadingGetGoal:T,isFetchingGetGoal:H,updateGoal:F,isLoadingUpdateGoalMutation:O,isSuccessUpdateGoalMutation:q,isErrorUpdateGoalMutation:z,ErrorUpdateGoalMutation:J,localIsResponseUpdateGoalMutation:V,postGoal:W,isLoadingPostGoalMutation:Z,isSuccessPostGoalMutation:K,isErrorPostGoalMutation:Q,ErrorPostGoalMutation:Y,localIsResponsePostGoalMutation:D}=(0,p.uE)(),X=()=>{Object.keys(R).length>0?b((e=>[...e,[""]])):(async()=>{await W({content:[""],organizationId:I}).unwrap().then().catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})()};return(0,n.useEffect)((()=>{R.id&&b(R.content)}),[R]),(0,n.useEffect)((()=>{const e=e=>{"Enter"===e.key&&e.ctrlKey&&X()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),(0,v.jsxs)("div",{className:r.dialog,children:[(0,v.jsx)(u.A,{name:"\u0446\u0435\u043b\u0438",funcActiveHint:()=>B(!0),children:(0,v.jsx)(g.A,{update:async()=>{await F({_id:R.id,content:E}).unwrap().then((()=>{})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},refUpdate:P})}),(0,v.jsxs)("div",{className:r.main,children:[(0,v.jsx)(h.Ay,{locale:f.A,children:(0,v.jsx)(x.A,{open:y,onClose:()=>B(!1),steps:M})}),U?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(d.A,{Error:U})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.A,{Loading:T,Fetching:H}),(0,v.jsx)(c.JY,{onDragEnd:e=>{const{source:t,destination:a}=e;if(!a)return;const o=Array.from(E),[n]=o.splice(t.index,1);o.splice(a.index,0,n),b(o)},children:(0,v.jsx)(c.gL,{droppableId:"editorList",children:e=>(0,v.jsxs)("div",(0,o.A)((0,o.A)({},e.droppableProps),{},{ref:e.innerRef,className:r.droppableContainer,children:[E.map(((e,t)=>(0,v.jsx)(c.sx,{draggableId:"item-".concat(t),index:t,children:a=>(0,v.jsxs)("div",(0,o.A)((0,o.A)({ref:a.innerRef},a.draggableProps),{},{className:r.editorContainer,children:[(0,v.jsx)("div",(0,o.A)((0,o.A)({},a.dragHandleProps),{},{className:r.dragHandle,children:(0,v.jsx)("img",{ref:w,src:l,alt:"drag"})})),(0,v.jsx)(_.A,{value:e,onChange:e=>{const a=[...E];a[t]=e,b(a)}},t),(0,v.jsx)("img",{ref:S,src:i,alt:"deleteImage",className:r.deleteIcon,onClick:()=>(e=>{b((t=>{const a=[...t];return a.splice(e,1),a}))})(t)})]}))},t))),e.placeholder]}))})}),(0,v.jsxs)("button",{ref:N,className:r.add,onClick:()=>X(),children:[(0,v.jsxs)("svg",{width:"19.998047",height:"20.000000",viewBox:"0 0 19.998 20",fill:"none",children:[(0,v.jsx)("defs",{}),(0,v.jsx)("path",{id:"Vector",d:"M10 20C4.47 19.99 0 15.52 0 10L0 9.8C0.1 4.3 4.63 -0.08 10.13 0C15.62 0.07 20.03 4.56 19.99 10.06C19.96 15.56 15.49 19.99 10 20ZM5 9L5 11L9 11L9 15L11 15L11 11L15 11L15 9L11 9L11 5L9 5L9 9L5 9Z",fill:"#B4B4B4","fill-opacity":"1.000000","fill-rule":"nonzero"})]}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{className:r.nameButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438 (Ctrl+Enter)"})})]}),(0,v.jsx)(s.A,{Loading:O,Error:z&&V,Success:q&&V,textSuccess:"\u0426\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==J&&void 0!==J&&null!==(e=J.data)&&void 0!==e&&null!==(t=e.errors)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&null!==(m=a.errors)&&void 0!==m&&m[0]?J.data.errors[0].errors[0]:null===J||void 0===J||null===(G=J.data)||void 0===G?void 0:G.message}),(0,v.jsx)(s.A,{Loading:Z,Error:Q&&D,Success:K&&D,textSuccess:"\u0426\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==Y&&void 0!==Y&&null!==(j=Y.data)&&void 0!==j&&null!==(A=j.errors)&&void 0!==A&&null!==(C=A[0])&&void 0!==C&&null!==(L=C.errors)&&void 0!==L&&L[0]?Y.data.errors[0].errors[0]:null===Y||void 0===Y||null===(k=Y.data)||void 0===k?void 0:k.message})]})]})]})}}}]);
//# sourceMappingURL=936.99a78425.chunk.js.map