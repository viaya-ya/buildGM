"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[407],{1268:(e,a,t)=>{t.d(a,{A:()=>d});t(5043);const r={editText:"BottomHeaders_editText__BUuuG"},s={wrapper:"ButtonAction_wrapper__S7EYo"};var n=t(3732),l=t(4530),i=t(9307),c=t(579);function o(e){let{create:a,update:t,refUpdate:r,refCreate:o}=e;return(0,c.jsxs)("div",{className:s.wrapper,children:[a&&(0,c.jsx)(i.A,{refAction:o,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:a}),t&&(0,c.jsx)(i.A,{refAction:r,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:l.A,onClick:t})]})}function d(e){let{children:a,create:t,update:s,refUpdate:n,refCreate:l}=e;return(0,c.jsxs)("div",{className:r.editText,children:[a,(0,c.jsx)(o,{create:t,update:s,refUpdate:n,refCreate:l})]})}},6407:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var r=t(5043);const s={dialog:"User_dialog__0lk3a",main:"User_main__44Hje",block:"User_block__d+Mje",column2:"User_column2__9VFcy",avatarContainer:"User_avatarContainer__i07CK",avatar:"User_avatar__P4b3Z",hiddenInput:"User_hiddenInput__Jy+Gg",btnSave:"User_btnSave__IZeTj"};var n=t(7422),l=t(1268),i=t(917),c=t(4457),o=t.n(c),d=t(8877),h=t(6537),u=t(9048),m=t(1488),x=t(9482),p=t(8048);const v={modal:"ModalSelectCheckBox_modal__U4QwJ",modalWindow:"ModalSelectCheckBox_modalWindow__Ck41e",header:"ModalSelectCheckBox_header__2+IHr",item1:"ModalSelectCheckBox_item1__tqPjW",item2:"ModalSelectCheckBox_item2__hzHot",search:"ModalSelectCheckBox_search__G2+Vd",exit:"ModalSelectCheckBox_exit__JUAnd",table:"ModalSelectCheckBox_table__5lcjE",row:"ModalSelectCheckBox_row__2dd5O"};var _=t(7583),j=t(4530),C=t(9307),g=t(579);function k(e){let{nameTable:a,handleSearchValue:t,handleSearchOnChange:r,exit:s,filterArray:n,array:l,arrayItem:i,save:c,handleChecboxChange:o,arrayChecked:d,nameBtn:h,iconBtn:u}=e;return(0,g.jsx)("div",{className:v.modal,children:(0,g.jsxs)("div",{className:v.modalWindow,children:[(0,g.jsx)("img",{src:_.A,alt:"exitModal",onClick:()=>s(),className:v.exit}),(0,g.jsxs)("div",{className:v.header,children:[(0,g.jsx)("div",{className:v.item1,children:(0,g.jsx)("input",{type:"search",placeholder:"\u041d\u0430\u0439\u0442\u0438",value:t,onChange:r,className:v.search})}),c&&(0,g.jsx)("div",{className:v.item2,children:(0,g.jsx)(C.A,{name:h||"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:u||j.A,onClick:c})})]}),(0,g.jsxs)("table",{className:v.table,children:[(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:(0,g.jsx)("th",{children:a})})}),n.length>0?(0,g.jsx)("tbody",{children:(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:null===n||void 0===n?void 0:n.map((e=>(0,g.jsxs)("div",{className:v.row,onClick:()=>o(e.id,e),children:[(0,g.jsx)("input",{type:"checkbox",checked:null===d||void 0===d?void 0:d.includes(e.id)}),e[i]]},e.id)))})})}):(0,g.jsx)("tbody",{children:(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:null===l||void 0===l?void 0:l.map((e=>(0,g.jsxs)("div",{className:v.row,onClick:()=>o(e.id,e),children:[(0,g.jsx)("input",{type:"checkbox",checked:null===d||void 0===d?void 0:d.includes(e.id)}),e[i]]},e.id)))})})})]})]})})}var S=t(5803),f=t(3732),A=t(3216),N=t(3003),U=t(6908);function y(){var e,a,t,c,v;const[_,j]=(0,r.useState)(""),[C,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[M,B]=(0,r.useState)(""),[I,E]=(0,r.useState)(!1),[O,P]=(0,r.useState)(""),[L,z]=(0,r.useState)(""),[J,R]=(0,r.useState)(""),[T,Z]=(0,r.useState)([]),[$,G]=(0,r.useState)([]),{reduxSelectedOrganizationId:W,postUser:H,isLoadingUserMutation:V,isSuccessUserMutation:F,isErrorUserMutation:q,ErrorUserMutation:D,localIsResponseUserMutation:K,postsWithoutUser:Q,isLoadingGetUserNew:Y,isErrorGetUserNew:X}=(0,d.I1)(),[ee]=(0,u.M$)(),ae=(0,N.wA)(),te=async()=>{const e={firstName:_,lastName:C,middleName:b,telephoneNumber:M,organizationId:W};if(L){const t=new FormData;t.append("file",L);try{const a=await ee(t).unwrap();e.avatar_url=a.filePath}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f:",JSON.stringify(a,null,2))}}try{const a=await H(e).unwrap();xe(),me(a.id),ae((0,U.Nz)(a.id))}catch(a){xe(),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",JSON.stringify(a,null,2))}},re=(0,r.useRef)(null),{filterArraySearchModalCheckBox:se,handleCheckboxChange:ne,inputSearchModalCheckBox:le,setInputSearchModalCheckBox:ie}=(0,d.MF)({array:Q,arrayItem:"postName",setArrayChecked:Z}),{updatePost:ce,isLoadingUpdatePostMutation:oe,isSuccessUpdatePostMutation:de,isErrorUpdatePostMutation:he,ErrorUpdatePostMutation:ue}=(0,d.es)(),me=async e=>{if(T.length>0&&e)try{await Promise.all(T.map((async a=>{await ce({_id:a,responsibleUserId:e}).unwrap().then((()=>{xe()})).catch((e=>{console.error(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u0430 ${a}:`,JSON.stringify(e,null,2))}))})))}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432:",a)}},xe=()=>{j(""),y(""),w(""),B(""),P(""),z(""),Z([]),G([])};(0,r.useEffect)((()=>{_&&C&&b&&12==M.length?E(!0):E(!1)}),[_,C,b,M]);const pe=(0,A.Zp)();return(0,g.jsxs)("div",{className:s.dialog,children:[(0,g.jsx)(n.A,{name:"\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:(0,g.jsx)(l.A,{})}),(0,g.jsxs)("div",{className:s.main,children:[(0,g.jsxs)("div",{className:s.block,children:[(0,g.jsxs)("div",{className:s.avatarContainer,children:[(0,g.jsx)("img",{src:O||m.A,alt:"avatar",className:s.avatar,onClick:()=>{re.current.click()}}),(0,g.jsx)("input",{type:"file",accept:"image/*",ref:re,className:s.hiddenInput,onChange:e=>{const a=e.target,t=e.target.files[0];if(t){z(t);const e=URL.createObjectURL(t);P(e)}a.value=""}}),(0,g.jsx)("img",{src:S.A,title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onClick:()=>{O&&URL.revokeObjectURL(O),z(""),P("")},style:{width:"12px",height:"12px"}})]}),(0,g.jsxs)("div",{className:s.column2,children:[(0,g.jsx)(i.A,{name:"\u0418\u043c\u044f",value:_,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);j(t)}}),(0,g.jsx)(i.A,{name:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:C,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);y(t)}}),(0,g.jsx)(i.A,{name:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:b,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);w(t)}}),(0,g.jsx)(i.A,{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",isShowInput:!0,children:(0,g.jsx)(o(),{mask:"+9 (999) 999-99-99",value:M,onChange:e=>{const a=e.target.value.replace(/\D/g,"");B(`+${a}`)},placeholder:"+9 (999) 999-99-99",required:!0,children:e=>(0,g.jsx)("input",{...e,type:"tel",id:"phone"})})}),(0,g.jsx)(p.A,{image:x.A,onClick:()=>R(!0),selectArray:$,prefix:"\u041f\u043e\u0441\u0442\u044b: ",btnName:"\u041f\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043f\u043e\u0441\u0442\u044b",disabled:!I}),J&&(0,g.jsx)(k,{nameTable:"\u041f\u043e\u0441\u0442\u044b",handleSearchValue:le,handleSearchOnChange:e=>ie(e.target.value),exit:()=>{R(!1);const e=T.map((e=>{var a;return null===(a=Q.find((a=>e===a.id)))||void 0===a?void 0:a.postName})).filter(Boolean);G(e)},filterArray:se,array:Q,arrayItem:"postName",handleChecboxChange:ne,arrayChecked:T,save:async()=>{try{await te(),pe("/pomoshnik/postNew")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",e)}},nameBtn:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",iconBtn:f.A}),(0,g.jsx)("button",{onClick:te,className:s.btnSave,disabled:!I,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),(0,g.jsx)(h.A,{Loading:V,Error:q&&K,Success:F&&K,textSuccess:`\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ${_} ${C} ${b} \u0441\u043e\u0437\u0434\u0430\u043d`,textError:null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&null!==(a=e.errors)&&void 0!==a&&null!==(t=a[0])&&void 0!==t&&null!==(c=t.errors)&&void 0!==c&&c[0]?D.data.errors[0].errors[0]:null===D||void 0===D||null===(v=D.data)||void 0===v?void 0:v.message})]})]})}}}]);
//# sourceMappingURL=407.62b70194.chunk.js.map