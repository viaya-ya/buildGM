"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[115],{1268:(e,a,t)=>{t.d(a,{A:()=>c});t(5043);const s={editText:"BottomHeaders_editText__BUuuG"},i={wrapper:"ButtonAction_wrapper__S7EYo"};var n=t(3732),r=t(4530),l=t(9307),o=t(579);function d(e){let{create:a,update:t,refUpdate:s,refCreate:d}=e;return(0,o.jsxs)("div",{className:i.wrapper,children:[a&&(0,o.jsx)(l.A,{refAction:d,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:a}),t&&(0,o.jsx)(l.A,{refAction:s,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:r.A,onClick:t})]})}function c(e){let{children:a,create:t,update:i,refUpdate:n,refCreate:r}=e;return(0,o.jsxs)("div",{className:s.editText,children:[a,(0,o.jsx)(d,{create:t,update:i,refUpdate:n,refCreate:r})]})}},2115:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var s=t(5043);const i={dialog:"SettingsPage_dialog__ie2CS",main:"SettingsPage_main__8qLPn",wrapper:"SettingsPage_wrapper__z5exK",block:"SettingsPage_block__joqzP",column2:"SettingsPage_column2__JHRly",avatarContainer:"SettingsPage_avatarContainer__4ILDU",avatar:"SettingsPage_avatar__1p6Jw",hiddenInput:"SettingsPage_hiddenInput__eznku"};var n=t(3216),r=t(4457),l=t.n(r),o=t(4522),d=t(5206),c=t(9498),u=t(8143),p=t(7422),v=t(1268),h=t(917),m=t(6537),g=t(3891),x=t(6467),C=t(1488),f=t(5803),j=t(8877),_=t(9048),A=t(579);function L(){var e,a,t,r,L;const[N,S]=(0,s.useState)(""),[w,U]=(0,s.useState)(""),[k,y]=(0,s.useState)(""),[I,P]=(0,s.useState)(""),[b,M]=(0,s.useState)(!1),[z,E]=(0,s.useState)(""),[R,Z]=(0,s.useState)(""),{reduxSelectedOrganizationId:$,postUser:O,isLoadingUserMutation:B,isSuccessUserMutation:J,isErrorUserMutation:q,ErrorUserMutation:D,localIsResponseUserMutation:G,postsWithoutUser:T,isLoadingGetUserNew:H,isErrorGetUserNew:F,userInfo:K,updateUser:V}=(0,j.I1)(),[W]=(0,_.M$)(),Y=(0,s.useRef)(null);(0,s.useEffect)((()=>{N&&w&&k&&12==I.length?M(!0):M(!1)}),[N,w,k,I]);const Q=(0,n.Zp)();console.log(K),(0,s.useEffect)((()=>{(0,g.z2)(K)&&(S(null===K||void 0===K?void 0:K.firstName),U(null===K||void 0===K?void 0:K.lastName),y(null===K||void 0===K?void 0:K.middleName),P(null===K||void 0===K?void 0:K.telephoneNumber),E(K.avatar_url?x.pc+(null===K||void 0===K?void 0:K.avatar_url):""))}),[K]);return(0,A.jsxs)("div",{className:i.dialog,children:[(0,A.jsx)(p.A,{name:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:(0,A.jsx)(v.A,{})}),(0,A.jsxs)("div",{className:i.main,children:[(0,A.jsxs)("div",{className:i.wrapper,children:[(0,A.jsxs)("div",{className:i.block,children:[(0,A.jsxs)("div",{className:i.avatarContainer,children:[(0,A.jsx)("img",{src:z||C.A,alt:"avatar",className:i.avatar,onClick:()=>{Y.current.click()}}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:Y,className:i.hiddenInput,onChange:e=>{const a=e.target,t=e.target.files[0];if(t){Z(t);const e=URL.createObjectURL(t);E(e)}a.value=""}}),(0,A.jsx)("img",{src:f.A,alt:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onClick:()=>{z&&URL.revokeObjectURL(z),Z(""),E("")},style:{width:"12px",height:"12px"}})]}),(0,A.jsxs)("div",{className:i.column2,children:[(0,A.jsx)(h.A,{name:"\u0418\u043c\u044f",value:N,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);S(t)}}),(0,A.jsx)(h.A,{name:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:w,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);U(t)}}),(0,A.jsx)(h.A,{name:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:k,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);console.log(t),y(t)}}),(0,A.jsx)(h.A,{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",isShowInput:!0,children:(0,A.jsx)(l(),{mask:"+9 (999) 999-99-99",value:I,onChange:e=>{const a=e.target.value.replace(/\D/g,"");P(`+${a}`)},placeholder:"+9 (999) 999-99-99",required:!0,children:e=>(0,A.jsx)("input",{...e,type:"tel",id:"phone"})})})]})]}),(0,A.jsx)(o.A,{style:{alignSelf:"flex-start",width:"100%"},header:(0,A.jsx)("div",{children:"\u0417\u0430\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0441\u0442\u044b"}),bordered:!0,dataSource:null===K||void 0===K?void 0:K.posts,renderItem:e=>(0,A.jsx)(o.A.Item,{children:(0,A.jsx)(o.A.Item.Meta,{avatar:(0,A.jsxs)("svg",{width:"20.000000",height:"20.000000",viewBox:"0 0 20 20",fill:"none",children:[(0,A.jsx)("desc",{children:"Created with Pixso."}),(0,A.jsx)("defs",{}),(0,A.jsx)("path",{id:"Vector",d:"M5 20C4.46 20 3.96 19.78 3.58 19.41C3.21 19.03 3 18.53 3 18L3 8C3 7.46 3.21 6.96 3.58 6.58C3.96 6.21 4.46 6 5 6L9 6L9 4L8 4C7.73 4 7.48 3.89 7.29 3.7C7.1 3.51 7 3.26 7 3L0 3L0 1L7 1C7 0.73 7.1 0.48 7.29 0.29C7.48 0.1 7.73 0 8 0L12 0C12.26 0 12.51 0.1 12.7 0.29C12.89 0.48 13 0.73 13 1L20 1L20 3L13 3C13 3.26 12.89 3.51 12.7 3.7C12.51 3.89 12.26 4 12 4L11 4L11 6L15 6C16.11 6 17 6.9 17 8L17 18C17 18.53 16.78 19.03 16.41 19.41C16.03 19.78 15.53 20 15 20L5 20ZM10 12.28C11.18 12.28 12.13 11.32 12.13 10.14C12.13 8.95 11.18 8 10 8C8.81 8 7.85 8.95 7.85 10.14C7.85 11.32 8.81 12.28 10 12.28ZM5 16.21C5 14.55 8.33 13.71 10 13.71C11.66 13.71 15 14.55 15 16.21L15 17.28C15 17.67 14.67 18 14.28 18L5.71 18C5.32 18 5 17.67 5 17.28L5 16.21Z",fill:"#005475","fill-opacity":"0.901961","fill-rule":"evenodd"})]}),title:(0,A.jsx)(d.Ay,{style:{padding:0},color:"default",variant:"link",onClick:()=>{return a=e.id,void Q(`/pomoshnik/post/${a}`);var a},children:e.postName}),description:(0,A.jsx)("div",{children:e.divisionName})})})})]}),(0,A.jsx)(c.A,{icon:(0,A.jsx)(u.A,{}),type:"primary",tooltip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",onClick:async()=>{const e={};if(N!==(null===K||void 0===K?void 0:K.firstName)&&(e.firstName=N),w!==(null===K||void 0===K?void 0:K.lastName)&&(e.lastName=w),k!==(null===K||void 0===K?void 0:K.middleName)&&(e.middleName=k),I!==(null===K||void 0===K?void 0:K.telephoneNumber)&&(e.telephoneNumber=I),R){const t=new FormData;t.append("file",R);try{const a=await W(t).unwrap();e.avatar_url=a.filePath}catch(a){throw console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f:",JSON.stringify(a,null,2)),a}}(0,g.z2)(e)&&await V({...e}).unwrap().then((()=>{})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},style:{insetInlineEnd:94}}),(0,A.jsx)(m.A,{Loading:B,Error:q&&G,Success:J&&G,textSuccess:`\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ${N} ${w} ${k} \u0441\u043e\u0437\u0434\u0430\u043d`,textError:null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&null!==(a=e.errors)&&void 0!==a&&null!==(t=a[0])&&void 0!==t&&null!==(r=t.errors)&&void 0!==r&&r[0]?D.data.errors[0].errors[0]:null===D||void 0===D||null===(L=D.data)||void 0===L?void 0:L.message})]})]})}}}]);
//# sourceMappingURL=115.d3d703e2.chunk.js.map