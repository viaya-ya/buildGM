"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[407],{1268:(e,a,t)=>{t.d(a,{A:()=>d});t(5043);const r={editText:"BottomHeaders_editText__6e9Ca"},s={wrapper:"ButtonAction_wrapper__YWbBU"};var n=t(3732),c=t(4530),i=t(9307),l=t(579);function o(e){let{create:a,update:t,refUpdate:r,refCreate:o}=e;return(0,l.jsxs)("div",{className:s.wrapper,children:[a&&(0,l.jsx)(i.A,{refAction:o,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:a}),t&&(0,l.jsx)(i.A,{refAction:r,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:c.A,onClick:t})]})}function d(e){let{children:a,create:t,update:s,refUpdate:n,refCreate:c}=e;return(0,l.jsxs)("div",{className:r.editText,children:[a,(0,l.jsx)(o,{create:t,update:s,refUpdate:n,refCreate:c})]})}},6407:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var r=t(9379),s=t(5043);const n={dialog:"User_dialog__JvQe3",main:"User_main__ibuEy",block:"User_block__-PgfL",column2:"User_column2__sXh-e",avatarContainer:"User_avatarContainer__bneNb",avatar:"User_avatar__gUSWO",hiddenInput:"User_hiddenInput__qby9C",btnSave:"User_btnSave__DbKIr"};var c=t(7422),i=t(1268),l=t(917),o=t(4457),d=t.n(o),h=t(8877),u=t(6537),m=t(9048),x=t(1488),p=t(9482),v=t(8048);const _={modal:"ModalSelectCheckBox_modal__++GYJ",modalWindow:"ModalSelectCheckBox_modalWindow__YexkJ",header:"ModalSelectCheckBox_header__ChWcU",item1:"ModalSelectCheckBox_item1__5Eh7N",item2:"ModalSelectCheckBox_item2__PRtzx",search:"ModalSelectCheckBox_search__5mi+6",exit:"ModalSelectCheckBox_exit__mf2sM",table:"ModalSelectCheckBox_table__Sz7YQ",row:"ModalSelectCheckBox_row__qMiZu"};var C=t(7583),j=t(4530),g=t(9307),k=t(579);function S(e){let{nameTable:a,handleSearchValue:t,handleSearchOnChange:r,exit:s,filterArray:n,array:c,arrayItem:i,save:l,handleChecboxChange:o,arrayChecked:d,nameBtn:h,iconBtn:u}=e;return(0,k.jsx)("div",{className:_.modal,children:(0,k.jsxs)("div",{className:_.modalWindow,children:[(0,k.jsx)("img",{src:C.A,alt:"exitModal",onClick:()=>s(),className:_.exit}),(0,k.jsxs)("div",{className:_.header,children:[(0,k.jsx)("div",{className:_.item1,children:(0,k.jsx)("input",{type:"search",placeholder:"\u041d\u0430\u0439\u0442\u0438",value:t,onChange:r,className:_.search})}),l&&(0,k.jsx)("div",{className:_.item2,children:(0,k.jsx)(g.A,{name:h||"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:u||j.A,onClick:l})})]}),(0,k.jsxs)("table",{className:_.table,children:[(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{children:(0,k.jsx)("th",{children:a})})}),n.length>0?(0,k.jsx)("tbody",{children:(0,k.jsx)("tr",{children:(0,k.jsx)("td",{children:null===n||void 0===n?void 0:n.map((e=>(0,k.jsxs)("div",{className:_.row,onClick:()=>o(e.id,e),children:[(0,k.jsx)("input",{type:"checkbox",checked:null===d||void 0===d?void 0:d.includes(e.id)}),e[i]]},e.id)))})})}):(0,k.jsx)("tbody",{children:(0,k.jsx)("tr",{children:(0,k.jsx)("td",{children:null===c||void 0===c?void 0:c.map((e=>(0,k.jsxs)("div",{className:_.row,onClick:()=>o(e.id,e),children:[(0,k.jsx)("input",{type:"checkbox",checked:null===d||void 0===d?void 0:d.includes(e.id)}),e[i]]},e.id)))})})})]})]})})}var f=t(5803),A=t(3732),N=t(3216),b=t(3003),U=t(6908);function y(){var e,a,t,o,_;const[C,j]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),[w,M]=(0,s.useState)(""),[B,I]=(0,s.useState)(""),[E,L]=(0,s.useState)(!1),[O,P]=(0,s.useState)(""),[z,R]=(0,s.useState)(""),[W,J]=(0,s.useState)(""),[T,Z]=(0,s.useState)([]),[Y,q]=(0,s.useState)([]),{reduxSelectedOrganizationId:D,postUser:G,isLoadingUserMutation:F,isSuccessUserMutation:Q,isErrorUserMutation:V,ErrorUserMutation:H,localIsResponseUserMutation:K,postsWithoutUser:X,isLoadingGetUserNew:$,isErrorGetUserNew:ee}=(0,h.I1)(),[ae]=(0,m.M$)(),te=(0,b.wA)(),re=async()=>{const e={firstName:C,lastName:g,middleName:w,telephoneNumber:B,organizationId:D};if(z){const t=new FormData;t.append("file",z);try{const a=await ae(t).unwrap();e.avatar_url=a.filePath}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f:",JSON.stringify(a,null,2))}}try{const a=await G(e).unwrap();pe(),xe(a.id),te((0,U.Nz)(a.id))}catch(a){pe(),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",JSON.stringify(a,null,2))}},se=(0,s.useRef)(null),{filterArraySearchModalCheckBox:ne,handleCheckboxChange:ce,inputSearchModalCheckBox:ie,setInputSearchModalCheckBox:le}=(0,h.MF)({array:X,arrayItem:"postName",setArrayChecked:Z}),{updatePost:oe,isLoadingUpdatePostMutation:de,isSuccessUpdatePostMutation:he,isErrorUpdatePostMutation:ue,ErrorUpdatePostMutation:me}=(0,h.es)(),xe=async e=>{if(T.length>0&&e)try{await Promise.all(T.map((async a=>{await oe({_id:a,responsibleUserId:e}).unwrap().then((()=>{pe()})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u0430 ".concat(a,":"),JSON.stringify(e,null,2))}))})))}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432:",a)}},pe=()=>{j(""),y(""),M(""),I(""),P(""),R(""),Z([]),q([])};(0,s.useEffect)((()=>{C&&g&&w&&12==B.length?L(!0):L(!1)}),[C,g,w,B]);const ve=(0,N.Zp)();return(0,k.jsxs)("div",{className:n.dialog,children:[(0,k.jsx)(c.A,{name:"\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:(0,k.jsx)(i.A,{})}),(0,k.jsxs)("div",{className:n.main,children:[(0,k.jsxs)("div",{className:n.block,children:[(0,k.jsxs)("div",{className:n.avatarContainer,children:[(0,k.jsx)("img",{src:O||x.A,alt:"avatar",className:n.avatar,onClick:()=>{se.current.click()}}),(0,k.jsx)("input",{type:"file",accept:"image/*",ref:se,className:n.hiddenInput,onChange:e=>{const a=e.target,t=e.target.files[0];if(t){R(t);const e=URL.createObjectURL(t);P(e)}a.value=""}}),(0,k.jsx)("img",{src:f.A,title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onClick:()=>{O&&URL.revokeObjectURL(O),R(""),P("")},style:{width:"12px",height:"12px"}})]}),(0,k.jsxs)("div",{className:n.column2,children:[(0,k.jsx)(l.A,{name:"\u0418\u043c\u044f",value:C,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);j(t)}}),(0,k.jsx)(l.A,{name:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:g,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);y(t)}}),(0,k.jsx)(l.A,{name:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:w,onChange:e=>{const a=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),t=a.charAt(0).toUpperCase()+a.slice(1);M(t)}}),(0,k.jsx)(l.A,{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",isShowInput:!0,children:(0,k.jsx)(d(),{mask:"+9 (999) 999-99-99",value:B,onChange:e=>{const a=e.target.value.replace(/\D/g,"");I("+".concat(a))},placeholder:"+9 (999) 999-99-99",required:!0,children:e=>(0,k.jsx)("input",(0,r.A)((0,r.A)({},e),{},{type:"tel",id:"phone"}))})}),(0,k.jsx)(v.A,{image:p.A,onClick:()=>J(!0),selectArray:Y,prefix:"\u041f\u043e\u0441\u0442\u044b: ",btnName:"\u041f\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043f\u043e\u0441\u0442\u044b",disabled:!E}),W&&(0,k.jsx)(S,{nameTable:"\u041f\u043e\u0441\u0442\u044b",handleSearchValue:ie,handleSearchOnChange:e=>le(e.target.value),exit:()=>{J(!1);const e=T.map((e=>{var a;return null===(a=X.find((a=>e===a.id)))||void 0===a?void 0:a.postName})).filter(Boolean);q(e)},filterArray:ne,array:X,arrayItem:"postName",handleChecboxChange:ce,arrayChecked:T,save:async()=>{try{await re(),ve("/pomoshnik/postNew")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",e)}},nameBtn:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",iconBtn:A.A}),(0,k.jsx)("button",{onClick:re,className:n.btnSave,disabled:!E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),(0,k.jsx)(u.A,{Loading:F,Error:V&&K,Success:Q&&K,textSuccess:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(C," ").concat(g," ").concat(w," \u0441\u043e\u0437\u0434\u0430\u043d"),textError:null!==H&&void 0!==H&&null!==(e=H.data)&&void 0!==e&&null!==(a=e.errors)&&void 0!==a&&null!==(t=a[0])&&void 0!==t&&null!==(o=t.errors)&&void 0!==o&&o[0]?H.data.errors[0].errors[0]:null===H||void 0===H||null===(_=H.data)||void 0===_?void 0:_.message})]})]})}}}]);
//# sourceMappingURL=407.14a52be0.chunk.js.map