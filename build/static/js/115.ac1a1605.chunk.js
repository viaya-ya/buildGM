"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[115],{1268:(e,t,a)=>{a.d(t,{A:()=>c});a(5043);const r={editText:"BottomHeaders_editText__6e9Ca"},s={wrapper:"ButtonAction_wrapper__YWbBU"};var n=a(3732),i=a(4530),o=a(9307),l=a(579);function d(e){let{create:t,update:a,refUpdate:r,refCreate:d}=e;return(0,l.jsxs)("div",{className:s.wrapper,children:[t&&(0,l.jsx)(o.A,{refAction:d,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:t}),a&&(0,l.jsx)(o.A,{refAction:r,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:i.A,onClick:a})]})}function c(e){let{children:t,create:a,update:s,refUpdate:n,refCreate:i}=e;return(0,l.jsxs)("div",{className:r.editText,children:[t,(0,l.jsx)(d,{create:a,update:s,refUpdate:n,refCreate:i})]})}},2115:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var r=a(9379),s=a(5043);const n={dialog:"SettingsPage_dialog__RpxaW",main:"SettingsPage_main__2qSgE",wrapper:"SettingsPage_wrapper__HG42e",block:"SettingsPage_block__RjFdY",column2:"SettingsPage_column2__l42W5",avatarContainer:"SettingsPage_avatarContainer__5BRwo",avatar:"SettingsPage_avatar__cTl0k",hiddenInput:"SettingsPage_hiddenInput__jmDCV"};var i=a(3216),o=a(4457),l=a.n(o),d=a(4522),c=a(5206),u=a(7422),p=a(1268),v=a(917),m=a(6537),g=a(3891),h=a(6467),C=a(1488),x=a(5803),f=a(8877),j=a(9048),_=a(839),A=a(4863),S=a(4293),N=a(579);function L(){var e,t,a,o,L;const[w,U]=(0,s.useState)(""),[k,y]=(0,s.useState)(""),[I,b]=(0,s.useState)(""),[M,P]=(0,s.useState)(""),[R,E]=(0,s.useState)(!1),[q,Z]=(0,s.useState)(""),[z,B]=(0,s.useState)(""),O=(0,s.useRef)(null),[T,W]=(0,s.useState)(!1),D=[{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>O.current},{title:"\u0410\u0432\u0430\u0442\u0430\u0440",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e, \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u043a\u0440\u0435\u0441\u0442\u0438\u043a \u0430\u0432\u0430\u0442\u0430\u0440 \u0443\u0434\u0430\u043b\u0438\u0442\u044c\u0441\u044f",target:()=>document.querySelector('[data-tour="data-avatar"]')},{title:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",target:()=>document.querySelector('[data-tour="data-form"]')},{title:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",target:()=>document.querySelector('[data-tour="data-form"]')},{title:"\u0417\u0430\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0441\u0442\u044b",description:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0433\u0430\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u044b \u0437\u0430\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c",target:()=>document.querySelector('[data-tour="data-post"]')},{title:"\u041f\u043e\u0441\u0442",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430 \u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043a \u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u0441\u0442\u0443",target:()=>document.querySelector('[data-tour="data-postItem"]')}],{reduxSelectedOrganizationId:G,postUser:H,isLoadingUserMutation:F,isSuccessUserMutation:J,isErrorUserMutation:V,ErrorUserMutation:Y,localIsResponseUserMutation:$,postsWithoutUser:K,isLoadingGetUserNew:Q,isErrorGetUserNew:X,userInfo:ee,updateUser:te}=(0,f.I1)(),[ae]=(0,j.M$)(),re=(0,s.useRef)(null);(0,s.useEffect)((()=>{w&&k&&I&&12==M.length?E(!0):E(!1)}),[w,k,I,M]);const se=(0,i.Zp)();console.log(ee),(0,s.useEffect)((()=>{(0,g.z2)(ee)&&(U(null===ee||void 0===ee?void 0:ee.firstName),y(null===ee||void 0===ee?void 0:ee.lastName),b(null===ee||void 0===ee?void 0:ee.middleName),P(null===ee||void 0===ee?void 0:ee.telephoneNumber),Z(ee.avatar_url?h.pc+(null===ee||void 0===ee?void 0:ee.avatar_url):""))}),[ee]);return(0,N.jsxs)("div",{className:n.dialog,children:[(0,N.jsx)(u.A,{name:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",funcActiveHint:()=>W(!0),children:(0,N.jsx)(p.A,{update:async()=>{const e={};if(w!==(null===ee||void 0===ee?void 0:ee.firstName)&&(e.firstName=w),k!==(null===ee||void 0===ee?void 0:ee.lastName)&&(e.lastName=k),I!==(null===ee||void 0===ee?void 0:ee.middleName)&&(e.middleName=I),M!==(null===ee||void 0===ee?void 0:ee.telephoneNumber)&&(e.telephoneNumber=M),z){const a=new FormData;a.append("file",z);try{const t=await ae(a).unwrap();e.avatar_url=t.filePath}catch(t){throw console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f:",JSON.stringify(t,null,2)),t}}(0,g.z2)(e)&&await te((0,r.A)({},e)).unwrap().then((()=>{})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},refUpdate:O})}),(0,N.jsx)(_.Ay,{locale:S.A,children:(0,N.jsx)(A.A,{open:T,onClose:()=>W(!1),steps:D})}),(0,N.jsxs)("div",{className:n.main,children:[(0,N.jsxs)("div",{className:n.wrapper,children:[(0,N.jsxs)("div",{className:n.block,children:[(0,N.jsxs)("div",{className:n.avatarContainer,"data-tour":"data-avatar",children:[(0,N.jsx)("img",{src:q||C.A,alt:"avatar",className:n.avatar,onClick:()=>{re.current.click()}}),(0,N.jsx)("input",{type:"file",accept:"image/*",ref:re,className:n.hiddenInput,onChange:e=>{const t=e.target,a=e.target.files[0];if(a){B(a);const e=URL.createObjectURL(a);Z(e)}t.value=""}}),(0,N.jsx)("img",{src:x.A,alt:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onClick:()=>{q&&URL.revokeObjectURL(q),B(""),Z("")},style:{width:"12px",height:"12px"}})]}),(0,N.jsxs)("div",{className:n.column2,"data-tour":"data-form",children:[(0,N.jsx)(v.A,{name:"\u0418\u043c\u044f",value:w,onChange:e=>{const t=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),a=t.charAt(0).toUpperCase()+t.slice(1);U(a)}}),(0,N.jsx)(v.A,{name:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:k,onChange:e=>{const t=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),a=t.charAt(0).toUpperCase()+t.slice(1);y(a)}}),(0,N.jsx)(v.A,{name:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:I,onChange:e=>{const t=e.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\s]/g,""),a=t.charAt(0).toUpperCase()+t.slice(1);console.log(a),b(a)}}),(0,N.jsx)(v.A,{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",isShowInput:!0,children:(0,N.jsx)(l(),{mask:"+9 (999) 999-99-99",value:M,onChange:e=>{const t=e.target.value.replace(/\D/g,"");P("+".concat(t))},placeholder:"+9 (999) 999-99-99",required:!0,children:e=>(0,N.jsx)("input",(0,r.A)((0,r.A)({},e),{},{type:"tel",id:"phone"}))})})]})]}),(0,N.jsx)(d.A,{"data-tour":"data-post",style:{alignSelf:"flex-start",width:"100%"},header:(0,N.jsx)("div",{children:"\u0417\u0430\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0441\u0442\u044b"}),bordered:!0,dataSource:null===ee||void 0===ee?void 0:ee.posts,renderItem:e=>(0,N.jsx)(d.A.Item,{children:(0,N.jsx)(d.A.Item.Meta,{avatar:(0,N.jsxs)("svg",{width:"20.000000",height:"20.000000",viewBox:"0 0 20 20",fill:"none",children:[(0,N.jsx)("desc",{children:"Created with Pixso."}),(0,N.jsx)("defs",{}),(0,N.jsx)("path",{id:"Vector",d:"M5 20C4.46 20 3.96 19.78 3.58 19.41C3.21 19.03 3 18.53 3 18L3 8C3 7.46 3.21 6.96 3.58 6.58C3.96 6.21 4.46 6 5 6L9 6L9 4L8 4C7.73 4 7.48 3.89 7.29 3.7C7.1 3.51 7 3.26 7 3L0 3L0 1L7 1C7 0.73 7.1 0.48 7.29 0.29C7.48 0.1 7.73 0 8 0L12 0C12.26 0 12.51 0.1 12.7 0.29C12.89 0.48 13 0.73 13 1L20 1L20 3L13 3C13 3.26 12.89 3.51 12.7 3.7C12.51 3.89 12.26 4 12 4L11 4L11 6L15 6C16.11 6 17 6.9 17 8L17 18C17 18.53 16.78 19.03 16.41 19.41C16.03 19.78 15.53 20 15 20L5 20ZM10 12.28C11.18 12.28 12.13 11.32 12.13 10.14C12.13 8.95 11.18 8 10 8C8.81 8 7.85 8.95 7.85 10.14C7.85 11.32 8.81 12.28 10 12.28ZM5 16.21C5 14.55 8.33 13.71 10 13.71C11.66 13.71 15 14.55 15 16.21L15 17.28C15 17.67 14.67 18 14.28 18L5.71 18C5.32 18 5 17.67 5 17.28L5 16.21Z",fill:"#005475","fill-opacity":"0.901961","fill-rule":"evenodd"})]}),title:(0,N.jsx)(c.Ay,{"data-tour":"data-postItem",style:{padding:0},color:"default",variant:"link",onClick:()=>{return t=e.id,void se("/pomoshnik/post/".concat(t));var t},children:e.postName}),description:(0,N.jsx)("div",{children:e.divisionName})})})})]}),(0,N.jsx)(m.A,{Loading:F,Error:V&&$,Success:J&&$,textSuccess:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(w," ").concat(k," ").concat(I," \u0441\u043e\u0437\u0434\u0430\u043d"),textError:null!==Y&&void 0!==Y&&null!==(e=Y.data)&&void 0!==e&&null!==(t=e.errors)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&null!==(o=a.errors)&&void 0!==o&&o[0]?Y.data.errors[0].errors[0]:null===Y||void 0===Y||null===(L=Y.data)||void 0===L?void 0:L.message})]})]})}}}]);
//# sourceMappingURL=115.ac1a1605.chunk.js.map