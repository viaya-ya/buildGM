{"version":3,"file":"static/js/765.e1746acc.chunk.js","mappings":"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","sources":["webpack://good_management/./src/UI/Custom/Headers/BottomHeaders/BottomHeaders.module.css?e3ba","webpack://good_management/./src/UI/Custom/Headers/BottomHeaders/ButtonAction/ButtonAction.module.css?2769","UI/Custom/Headers/BottomHeaders/ButtonAction/ButtonAction.jsx","UI/Custom/Headers/BottomHeaders/BottomHeaders.jsx","UI/app/CompanySchema/desktop/schemeСompanies/SchemeСompanies.module.css","UI/app/CompanySchema/desktop/schemeСompanies/elementTree/Node.jsx","UI/app/CompanySchema/desktop/schemeСompanies/SchemeСompanies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"editText\":\"BottomHeaders_editText__BUuuG\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ButtonAction_wrapper__S7EYo\"};","import React from \"react\";\nimport classes from \"./ButtonAction.module.css\";\nimport iconAdd from \"../../../../image/iconAdd.svg\";\nimport Blacksavetmp from \"../../../../image/Blacksavetmp.svg\";\nimport ButtonImage from \"@Custom/buttonImage/ButtonImage\";\nexport default function ButtonAction({ create, update, refUpdate, refCreate }) {\n  return (\n    <div className={classes.wrapper}>\n      {create && (\n        <ButtonImage\n          refAction={refCreate}\n          name={\"создать\"}\n          icon={iconAdd}\n          onClick={create}\n        ></ButtonImage>\n      )}\n\n      {update && (\n        <ButtonImage\n          refAction={refUpdate}\n          name={\"обновить\"}\n          icon={Blacksavetmp}\n          onClick={update}\n        ></ButtonImage>\n      )}\n    </div>\n  );\n}\n","import React from 'react'\nimport classes from \"./BottomHeaders.module.css\"\nimport ButtonAction from './ButtonAction/ButtonAction'\n\nexport default function BottomHeaders({children, create, update,  refUpdate, refCreate}) {\n  return (\n    <div className={classes.editText}>\n        {children}\n        <ButtonAction create={create} update={update} refUpdate={refUpdate} refCreate={refCreate}></ButtonAction>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"SchemeСompanies_dialog__rOiHQ\",\"main\":\"SchemeСompanies_main__5cJmR\"};","import React from \"react\";\nimport { TreeNode } from \"react-organizational-chart\";\nimport { Card, Button } from \"antd\";\nimport { useNavigate } from \"react-router-dom\";\nimport DrawerUpdateOrganization from \"../../../drawer/drawerForOrganization/DrawerUpdateOrganization\";\n\nexport default function Node({ organization, allOrganizations, childrenOrg }) {\n  const navigate = useNavigate();\n  const cardClick = (organizationId) => {\n    navigate(`/pomoshnik/postSchema/${organizationId}`);\n  };\n\n  return (\n    <TreeNode\n      label={\n        <Card\n          loading={false}\n          style={{\n            display: \"inline-block\",\n            width: \"300px\",\n            height: \"175px\",\n            backgroundColor: organization.organizationColor,\n            boxShadow: \"0px 0px 4px 0px rgba(0, 0, 0, 0.25)\",\n          }}\n        >\n          <DrawerUpdateOrganization\n            organizationId={organization.id}\n            allOrganizations={allOrganizations}\n          ></DrawerUpdateOrganization>\n\n          <Button  data-tour = \"click-companyName\" type=\"link\" onClick={() => cardClick(organization.id)}>\n            {organization.organizationName}\n          </Button>\n        </Card>\n      }\n    >\n      {/* Рекурсивно отображаем дочерние элементы */}\n      {childrenOrg && childrenOrg.length > 0\n        ? childrenOrg.map((child) => (\n            <Node\n              key={child.id}\n              organization={child}\n              allOrganizations={allOrganizations}\n              childrenOrg={child.children}\n            />\n          ))\n        : null}\n    </TreeNode>\n  );\n}","import React, { useState, useEffect, useRef } from \"react\";\nimport classes from \"./SchemeСompanies.module.css\";\n\nimport _ from \"lodash\";\n\nimport { Card } from \"antd\";\nimport { Tree, TreeNode } from \"react-organizational-chart\";\n\nimport Headers from \"@Custom/Headers/Headers\";\nimport BottomHeaders from \"@Custom/Headers/BottomHeaders/BottomHeaders.jsx\";\n\nimport Node from \"./elementTree/Node.jsx\";\nimport { useAllOrganizations } from \"@hooks/Organization/useAllOrganizations.js\";\nimport DrawerCreateOrganization from \"../../drawer/drawerForOrganization/DrawerCreateOrganization\";\n\nimport { ConfigProvider, Tour } from \"antd\";\nimport ruRU from \"antd/locale/ru_RU\";\nconst buildTree = (organizations) => {\n  const postMap = {};\n  const roots = [];\n\n  // Создаем карту постов\n  organizations.forEach((post) => {\n    post.children = [];\n    postMap[post.id] = post;\n  });\n\n  // Строим дерево\n  organizations.forEach((post) => {\n    if (post.parentOrganizationId === null) {\n      roots.push(post);\n    } else {\n      if (postMap[post.parentOrganizationId]) {\n        postMap[post.parentOrganizationId].children.push(post);\n      }\n    }\n  });\n\n  return roots;\n};\n\nconst OrganizationTree = ({ organizations }) => {\n  const tree = buildTree(organizations);\n  return (\n    <>\n      {tree.map((org) => (\n        <Node\n          key={org.id}\n          organization={org}\n          allOrganizations={organizations}\n          childrenOrg={org.children}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default function SchemeСompanies() {\n  const { organizations, isLoadingOrganization, isErrorOrganization } =\n    useAllOrganizations();\n\n  const [getOrganizations, setGetOrganizations] = useState([]);\n  const [openCreateOrganization, setOpenCreateOrganization] = useState(false);\n\n  const [openHint, setOpenHint] = useState(false);\n  const refCreate = useRef(null); \n  const steps = [\n    {\n      title: \"Создать\",\n      description: \"Нажмите для создания компании\",\n      target: () => refCreate.current,\n    },\n    {\n      title: \"Редактировать\",\n      description: \"Нажмите и отредактируйте\",\n      target: () => document.querySelector('[data-tour=\"setting-button\"]'),\n      disabled: !document.querySelector('[data-tour=\"setting-button\"]'),\n    },\n    {\n      title: \"Компания\",\n      description: \"Нажмите для перехода в компанию\",\n      target: () => document.querySelector('[data-tour=\"click-companyName\"]'),\n      disabled: !document.querySelector('[data-tour=\"click-companyName\"]'),\n    },\n  ].filter((step) => {\n    if (step.target.toString().includes(\"querySelector\")) {\n      return !step.disabled;\n    }\n    return true;\n  });\n\n  const createOrganization = () => {\n    setOpenCreateOrganization(true);\n  };\n\n  useEffect(() => {\n    if (!_.isEqual(getOrganizations, organizations)) {\n      setGetOrganizations(_.cloneDeep(organizations));\n    }\n  }, [organizations]);\n\n  return (\n    <div className={classes.dialog}>\n      <Headers\n        name={\"схема компании\"}\n        funcActiveHint={() => setOpenHint(true)}\n      >\n        <BottomHeaders create={createOrganization}  refCreate={refCreate}/>\n      </Headers>\n\n      <ConfigProvider locale={ruRU}>\n        <Tour\n          open={openHint}\n          onClose={() => setOpenHint(false)}\n          steps={steps}\n        />\n      </ConfigProvider>\n\n      <DrawerCreateOrganization\n        open={openCreateOrganization}\n        setOpen={setOpenCreateOrganization}\n        allOrganizations={organizations}\n      ></DrawerCreateOrganization>\n\n      <div className={classes.main}>\n        <Tree\n          lineWidth={\"2px\"}\n          lineColor={\"#ccc\"}\n          lineBorderRadius={\"10px\"}\n          label={\n            <Card\n              loading={false}\n              style={{\n                display: \"inline-block\",\n                width: \"300px\",\n                height: \"175px\",\n                boxShadow: \"0px 0px 4px 0px rgba(0, 0, 0, 0.25)\",\n              }}\n            >\n              <p>МОЙ БИЗНЕС</p>\n              <p>СОБСТВЕННИК</p>\n              <p>Иванов Иван</p>\n            </Card>\n          }\n        >\n          <OrganizationTree organizations={getOrganizations}></OrganizationTree>\n        </Tree>\n      </div>\n    </div>\n  );\n}\n"],"names":["ButtonAction","_ref","create","update","refUpdate","refCreate","_jsxs","className","classes","wrapper","children","_jsx","ButtonImage","refAction","name","icon","iconAdd","onClick","Blacksavetmp","BottomHeaders","editText","Node","organization","allOrganizations","childrenOrg","navigate","useNavigate","TreeNode","label","Card","loading","style","display","width","height","backgroundColor","organizationColor","boxShadow","DrawerUpdateOrganization","organizationId","id","Button","type","cardClick","organizationName","length","map","child","OrganizationTree","organizations","tree","postMap","roots","forEach","post","parentOrganizationId","push","buildTree","_Fragment","org","SchemeСompanies","isLoadingOrganization","isErrorOrganization","useAllOrganizations","getOrganizations","setGetOrganizations","useState","openCreateOrganization","setOpenCreateOrganization","openHint","setOpenHint","useRef","steps","title","description","target","current","document","querySelector","disabled","filter","step","toString","includes","useEffect","_","dialog","Headers","funcActiveHint","createOrganization","ConfigProvider","locale","ruRU","Tour","open","onClose","DrawerCreateOrganization","setOpen","main","Tree","lineWidth","lineColor","lineBorderRadius"],"sourceRoot":""}