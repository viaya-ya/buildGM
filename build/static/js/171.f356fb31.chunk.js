"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[171],{1268:(e,o,t)=>{t.d(o,{A:()=>d});t(5043);const s={editText:"BottomHeaders_editText__6e9Ca"},l={wrapper:"ButtonAction_wrapper__YWbBU"};var i=t(3732),a=t(4530),n=t(9307),r=t(579);function c(e){let{create:o,update:t,refUpdate:s,refCreate:c}=e;return(0,r.jsxs)("div",{className:l.wrapper,children:[o&&(0,r.jsx)(n.A,{refAction:c,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:i.A,onClick:o}),t&&(0,r.jsx)(n.A,{refAction:s,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:a.A,onClick:t})]})}function d(e){let{children:o,create:t,update:l,refUpdate:i,refCreate:a}=e;return(0,r.jsxs)("div",{className:s.editText,children:[o,(0,r.jsx)(c,{create:t,update:l,refUpdate:i,refCreate:a})]})}},2171:(e,o,t)=>{t.r(o),t.d(o,{default:()=>z});var s=t(5043);const l={dialog:"CompanySchema_dialog__p281w",main:"CompanySchema_main__x8uFf",header:"CompanySchema_header__NDQ-a",boldText:"CompanySchema_boldText__YEQlF",wrapper:"CompanySchema_wrapper__RDxD1"};var i=t(3216),a=t(3536),n=t.n(a),r=t(9498),c=t(7422),d=t(1268),u=t(71);t(6537);const m={wrapper:"PostSchema_wrapper__tJVHs",block:"PostSchema_block__AbUbC",nameBlock:"PostSchema_nameBlock__H0JFk",childBlock:"PostSchema_childBlock__kgZ7x",customScrollbar:"PostSchema_customScrollbar__wxTK2",customScrollbarThumb:"PostSchema_customScrollbarThumb__Okbqn"};var p=t(5206),h=t(8757),v=t(579);const x=e=>{let{post:o,level:t=1,baseColor:s,setOnePost:l,setViewChildrenPost:i,setHeader:a}=e;const r=(0,h.Zt)(s,.2*t);return(0,v.jsxs)("div",{className:m.childBlock,style:{backgroundColor:r},children:[(0,v.jsxs)("div",{className:m.nameBlock,children:[(0,v.jsx)(p.Ay,{type:"link",onClick:e=>{((e,t)=>{var s,c,d,u;e.stopPropagation();const m=n().cloneDeep(t);m.color=r,console.log(m),l([m]),a({postName:null!==(s=null===o||void 0===o?void 0:o.postName)&&void 0!==s?s:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(c=null===o||void 0===o?void 0:o.divisionName)&&void 0!==c?c:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==o&&void 0!==o&&o.user?"".concat(null!==(d=o.user.firstName)&&void 0!==d?d:""," ").concat(null!==(u=o.user.lastName)&&void 0!==u?u:"").trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),i(!0)})(e,o)},children:null===o||void 0===o?void 0:o.divisionName}),(0,v.jsx)("h2",{children:o.postName}),o.user?(0,v.jsxs)("h3",{children:[null===o||void 0===o?void 0:o.user.firstName," ",null===o||void 0===o?void 0:o.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),(null===o||void 0===o?void 0:o.children.length)>0&&(0,v.jsx)("div",{className:m.childBlock,children:o.children.map((e=>(0,v.jsx)(x,{post:e,level:t>2?1:t+1,baseColor:s,setOnePost:l,setViewChildrenPost:i,setHeader:a},e.id)))})]})};function j(e){var o,t;let{post:s,backgroundColor:l,setOnePost:i,setViewChildrenPost:a,setHeader:r}=e;return(0,v.jsx)("div",{className:m.wrapper,style:{backgroundColor:l},children:(0,v.jsxs)("div",{className:m.block,style:{backgroundColor:l},children:[(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"}}),(0,v.jsxs)("div",{className:m.nameBlock,children:[(0,v.jsx)(p.Ay,{"data-tour":"click-postName",type:"link",onClick:()=>{(e=>{var o,t,c,d;const u=n().cloneDeep(e);u.color=l,console.log(u),i([u]),r({postName:null!==(o=null===s||void 0===s?void 0:s.postName)&&void 0!==o?o:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(t=null===s||void 0===s?void 0:s.divisionName)&&void 0!==t?t:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?"".concat(null!==(c=s.user.firstName)&&void 0!==c?c:""," ").concat(null!==(d=s.user.lastName)&&void 0!==d?d:"").trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),a(!0)})(s)},children:null===s||void 0===s?void 0:s.divisionName}),(0,v.jsx)("h2",{children:null===s||void 0===s?void 0:s.postName}),(null===s||void 0===s?void 0:s.user)&&(0,v.jsxs)("h3",{children:[null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.firstName," ",null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.lastName]})]}),(null===s||void 0===s?void 0:s.children.length)>0&&(0,v.jsx)("div",{className:m.childBlock,children:null===s||void 0===s?void 0:s.children.map((e=>(0,v.jsx)(x,{post:e,baseColor:l,setOnePost:i,setViewChildrenPost:a,setHeader:r},e.id)))})]})})}const N="BlockSchema_wrapper__dYpX+",g="BlockSchema_block__-HPh8",C="BlockSchema_nameBlock__9hAAV",y="BlockSchema_childBlock__frsbQ";var k=t(8345),b=t(6282),_=t(2469);const f=e=>{let{post:o,level:t=1,baseColor:s,setOnePost:l,setViewChildrenPost:i,setHeader:a}=e;const r=(0,h.Zt)(s,.2*t);return(0,v.jsxs)("div",{className:y,style:{backgroundColor:r},children:[(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(_.A,{postId:o.id}),(0,v.jsx)(p.Ay,{type:"link",onClick:e=>{((e,t)=>{var r,c,d,u;e.stopPropagation();const m=n().cloneDeep(t);m.color=s,console.log(m),l([m]),a({postName:null!==(r=null===o||void 0===o?void 0:o.postName)&&void 0!==r?r:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(c=null===o||void 0===o?void 0:o.divisionName)&&void 0!==c?c:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==o&&void 0!==o&&o.user?"".concat(null!==(d=o.user.firstName)&&void 0!==d?d:""," ").concat(null!==(u=o.user.lastName)&&void 0!==u?u:"").trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),i(!0)})(e,o)},children:o.divisionName}),(0,v.jsx)("h2",{children:o.postName}),o.user?(0,v.jsxs)("h3",{children:[o.user.firstName," ",o.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),o.children.length>0&&(0,v.jsx)("div",{className:y,children:o.children.map((e=>(0,v.jsx)(f,{post:e,level:t>2?1:t+1,baseColor:s,setOnePost:l,setViewChildrenPost:i,setHeader:a},e.id)))})]})};function S(e){let{post:o,arrayColors:t,setArrayColors:l,setOnePost:i,setViewChildrenPost:a,setHeader:r}=e,c=t.get(o.id);const[d,u]=(0,s.useState)(null);return(0,v.jsx)("div",{className:N,style:{backgroundColor:d||c},children:(0,v.jsxs)("div",{className:g,style:{backgroundColor:d||c},children:[(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"},children:[(0,v.jsx)(b.A,{placement:"topLeft",content:(0,v.jsx)(h.Jz,{onColorSelect:e=>{u(e),l((t=>{const s=new Map(t);return s.set(o.id,e),s}))},selectedColor:d,colorFromBD:c}),children:(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,v.jsx)("img",{"data-tour":"color-palette",src:k.A,alt:"palette",width:"30px",height:"30px"})})}),(0,v.jsx)(_.A,{postId:o.id})]}),(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(p.Ay,{type:"link",onClick:()=>{(e=>{var t,s,l,u;const m=n().cloneDeep(e);m.color=d||c,console.log(m),i([m]),r({postName:null!==(t=null===o||void 0===o?void 0:o.postName)&&void 0!==t?t:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(s=null===o||void 0===o?void 0:o.divisionName)&&void 0!==s?s:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==o&&void 0!==o&&o.user?"".concat(null!==(l=o.user.firstName)&&void 0!==l?l:""," ").concat(null!==(u=o.user.lastName)&&void 0!==u?u:"").trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),a(!0)})(o)},children:o.divisionName}),(0,v.jsx)("h2",{children:o.postName}),o.user&&(0,v.jsxs)("h3",{children:[o.user.firstName," ",o.user.lastName]})]}),o.children.length>0&&(0,v.jsx)("div",{className:y,children:o.children.map((e=>(0,v.jsx)(f,{post:e,baseColor:d||c,setOnePost:i,setViewChildrenPost:a,setHeader:r},e.id)))})]})})}var w=t(135),A=t(1638),P=t(8877),O=t(839),B=t(4863),H=t(4293);const V=e=>{let{posts:o,arrayColors:t,setArrayColors:s,setOnePost:i,setViewChildrenPost:a,setHeader:n}=e;const r=(0,h.H6)(o);return console.log(r),(0,v.jsx)("div",{className:l.wrapper,children:r.map((e=>(0,v.jsx)(S,{post:e,arrayColors:t,setArrayColors:s,setOnePost:i,setViewChildrenPost:a,setHeader:n},e.id)))})};function z(){var e,o;const{organizationId:t}=(0,i.g)(),a=(0,i.Zp)(),m=()=>{a("/pomoshnik/companySchema")},{allPosts:p=[],isLoadingGetPosts:h,isFetchingGetPosts:x,isErrorGetPosts:N}=(0,P.iV)({organizationId:t,structure:!0}),{currentOrganization:g,isLoadingOrganizationId:C,isFetchingOrganizationId:y}=(0,P.nU)({organizationId:t}),{updateOrganization:k,isLoadingUpdateOrganizationMutation:b,isSuccessUpdateOrganizationMutation:_,isErrorUpdateOrganizationMutation:f,ErrorOrganization:S,localIsResponseUpdateOrganizationMutation:z}=(0,P.YK)(),[F,I]=(0,s.useState)([]),[q,E]=(0,s.useState)([]),[T,U]=(0,s.useState)(new Map),[D,M]=(0,s.useState)(!1),[L,R]=(0,s.useState)({postName:"",divisionName:"",fullName:""}),Y=(0,s.useRef)(null),Z=(0,s.useRef)(null),[G,J]=(0,s.useState)(!1),Q=[{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",target:()=>Y.current},{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>Z.current},{title:"\u041f\u0430\u043b\u0438\u0442\u0440\u0430",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0446\u0432\u0435\u0442\u043e\u0432\u0443\u044e \u0433\u0430\u043c\u043c\u0443 \u043f\u043e\u0441\u0442\u0430",target:()=>document.querySelector('[data-tour="color-palette"]'),disabled:!document.querySelector('[data-tour="color-palette"]')},{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u043e\u0441\u0442",target:()=>document.querySelector('[data-tour="setting-button"]'),disabled:!document.querySelector('[data-tour="setting-button"]')},{title:"\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u0432 \u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435",target:()=>document.querySelector('[data-tour="click-postName"]'),disabled:!document.querySelector('[data-tour="click-postName"]')},{title:"\u041d\u0430\u0437\u0430\u0434",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043a \u0441\u0445\u0435\u043c\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",target:()=>document.querySelector('[data-tour="click-backCompany"]'),disabled:!document.querySelector('[data-tour="click-backCompany"]')}].filter((e=>!e.target.toString().includes("querySelector")||!e.disabled));(0,s.useEffect)((()=>{n().isEqual(F,p)||I(n().cloneDeep(p))}),[p]),(0,s.useEffect)((()=>{null!==g&&void 0!==g&&g.colorCodes&&"object"===typeof g.colorCodes&&U(new Map(Object.entries(g.colorCodes)))}),[g]);const[K,W]=(0,s.useState)(!1);return console.log("onePost"),console.log(q),(0,v.jsxs)("div",{className:l.dialog,children:[(0,v.jsx)(c.A,{name:"\u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u043e\u0432",funcActiveHint:()=>J(!0),children:(0,v.jsx)(d.A,{update:async()=>{const e={};for(const[o,t]of T)e[o]=t;await k({_id:t,colorCodes:e})},create:()=>{W(!0)},refCreate:Y,refUpdate:Z})}),(0,v.jsx)(O.Ay,{locale:H.A,children:(0,v.jsx)(B.A,{open:G,onClose:()=>J(!1),steps:Q})}),(0,v.jsx)(A.A,{open:K,setOpen:W,organizationId:t}),N?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.A,{Error:N})}):(0,v.jsx)("div",{className:l.main,children:x||h?(0,v.jsx)(u.A,{Loading:h,Fetching:x}):(0,v.jsx)(v.Fragment,{children:0===p.length?(0,v.jsxs)("div",{className:l.header,children:[(0,v.jsx)("h1",{className:l.boldText,children:"\u041f\u043e\u0441\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"}),(0,v.jsx)(r.A,{"data-tour":"click-backCompany",icon:(0,v.jsx)("img",{src:w.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:m,style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:l.header,children:[(0,v.jsx)("h1",{className:l.boldText,children:L.postName}),(0,v.jsx)("h2",{className:l.boldText,children:L.divisionName}),(0,v.jsx)("h3",{children:L.fullName})]}),(0,v.jsx)("div",{className:l.wrapper,children:D?(0,v.jsxs)(v.Fragment,{children:[null===(e=q[0])||void 0===e||null===(o=e.children)||void 0===o?void 0:o.map((e=>(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j,{post:e,backgroundColor:q[0].color,setOnePost:E,setViewChildrenPost:M,setHeader:R},e.id)}))),(0,v.jsx)(r.A,{"data-tour":"click-backCompany",icon:(0,v.jsx)("img",{src:w.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:()=>M(!1),style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V,{posts:F,arrayColors:T,setArrayColors:U,setOnePost:E,setViewChildrenPost:M,setHeader:R}),(0,v.jsx)(r.A,{"data-tour":"click-backCompany",icon:(0,v.jsx)("img",{src:w.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:m,style:{insetInlineEnd:94}})]})})]})})})]})}}}]);
//# sourceMappingURL=171.f356fb31.chunk.js.map