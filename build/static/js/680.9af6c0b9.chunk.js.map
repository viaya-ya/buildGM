{"version":3,"file":"static/js/680.9af6c0b9.chunk.js","mappings":"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","sources":["webpack://good_management/./src/UI/app/Chat/Chat.module.css?9e13","UI/image/burger.svg","webpack://good_management/./src/UI/app/Chat/section/Section.module.css?5473","UI/app/Chat/section/Section.jsx","UI/app/Chat/Chat.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"contact\":\"Chat_contact__nk3Vv\",\"header\":\"Chat_header__YCSVS\",\"headerName\":\"Chat_headerName__T3uB5\",\"search\":\"Chat_search__Vvdil\",\"main\":\"Chat_main__SydNe\",\"btnPomoshnik\":\"Chat_btnPomoshnik__qQh3R\",\"btnAddUser\":\"Chat_btnAddUser__zrBJJ\"};","var _desc, _defs, _rect, _g;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgBurger(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"\\r\\n\\t\\t\\tCreated with Pixso.\\r\\n\\t\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip818_4238\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"icon / menu\",\n    width: 24,\n    height: 24,\n    fill: \"white\",\n    fillOpacity: 0\n  })))), _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"icon / menu\",\n    width: 24,\n    height: 24,\n    fill: \"#FFFFFF\",\n    fillOpacity: 0\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip818_4238)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Vector 36\",\n    d: \"M5 7L19 7\",\n    stroke: \"#FFFFFF\",\n    strokeOpacity: 1,\n    strokeWidth: 2,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Vector 37\",\n    d: \"M5 12L19 12\",\n    stroke: \"#FFFFFF\",\n    strokeOpacity: 1,\n    strokeWidth: 2,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Vector 38\",\n    d: \"M5 17L19 17\",\n    stroke: \"#FFFFFF\",\n    strokeOpacity: 1,\n    strokeWidth: 2,\n    strokeLinecap: \"round\"\n  }))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgBurger);\nexport default __webpack_public_path__ + \"static/media/burger.8bcbc4ec4a4e55c7d318c4cf4d7ac3f1.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"Section_section__95KIY\",\"name\":\"Section_name__d7Siy\",\"block\":\"Section_block__IskLD\",\"icon\":\"Section_icon__NdUBX\",\"row\":\"Section_row__IdPEf\",\"row_active\":\"Section_row_active__wBzOy\",\"controlPanel\":\"Section_controlPanel__F0Dfi\",\"line\":\"Section_line__inQLU\"};","import React, { useEffect } from \"react\";\r\nimport classes from \"./Section.module.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  setSelectedOrganizationId,\r\n  setSelectedOrganizationReportDay,\r\n} from \"@slices\";\r\nimport { useGetReduxOrganization, useOrganizationHook } from \"@hooks\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Section() {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { organizations, isLoadingOrganization, isErrorOrganization } =\r\n    useOrganizationHook();\r\n\r\n  const { reduxSelectedOrganizationId } = useGetReduxOrganization();\r\n\r\n  const handleOrganizationNameButtonClick = (id, name, reportDay) => {\r\n    localStorage.setItem(\"selectedOrganizationId\", id);\r\n    localStorage.setItem(\"name\", name);\r\n    localStorage.setItem(\"reportDay\", reportDay);\r\n    dispatch(setSelectedOrganizationId(id));\r\n    dispatch(setSelectedOrganizationReportDay(reportDay));\r\n  };\r\n\r\n  const handleControlPanelButtonClick = () => {\r\n    navigate(\"/controlPanel\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoadingOrganization && !isErrorOrganization && organizations?.length > 0) {\r\n      const defaultOrg = organizations[0];\r\n      if (!localStorage.getItem(\"selectedOrganizationId\")) {\r\n        localStorage.setItem(\"selectedOrganizationId\", defaultOrg.id);\r\n        localStorage.setItem(\"name\", defaultOrg.organizationName);\r\n        localStorage.setItem(\"reportDay\", defaultOrg.reportDay);\r\n        \r\n        // Также обновляем Redux store\r\n        dispatch(setSelectedOrganizationId(defaultOrg.id));\r\n        dispatch(setSelectedOrganizationReportDay(defaultOrg.reportDay));\r\n      }\r\n    }\r\n  }, [organizations, isLoadingOrganization, isErrorOrganization, dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.section}>\r\n        <div className={classes.name}>\r\n          <span>Организации</span>\r\n        </div>\r\n      </div>\r\n      <div className={classes.block}>\r\n        {organizations.map((item) => (\r\n          <>\r\n            <div\r\n              key={item.id}\r\n              className={`${classes.row} ${\r\n                reduxSelectedOrganizationId === item.id\r\n                  ? classes.row_active\r\n                  : \"\"\r\n              }`}\r\n              onClick={() =>\r\n                handleOrganizationNameButtonClick(\r\n                  item.id,\r\n                  item.organizationName,\r\n                  item.reportDay\r\n                )\r\n              }\r\n            >\r\n              <svg className={classes.icon} width=\"25\" height=\"25\">\r\n                <path d=\"M19.66 15.5L17.58 15.5L17.58 17.58L19.66 17.58L19.66 15.5ZM19.66 11.33L17.58 11.33L17.58 13.41L19.66 13.41L19.66 11.33ZM21.75 19.66L13.41 19.66L13.41 17.58L15.5 17.58L15.5 15.5L13.41 15.5L13.41 13.41L15.5 13.41L15.5 11.33L13.41 11.33L13.41 9.25L21.75 9.25L21.75 19.66ZM11.33 7.16L9.25 7.16L9.25 5.08L11.33 5.08L11.33 7.16ZM11.33 11.33L9.25 11.33L9.25 9.25L11.33 9.25L11.33 11.33ZM11.33 15.5L9.25 15.5L9.25 13.41L11.33 13.41L11.33 15.5ZM11.33 19.66L9.25 19.66L9.25 17.58L11.33 17.58L11.33 19.66ZM7.16 7.16L5.08 7.16L5.08 5.08L7.16 5.08L7.16 7.16ZM7.16 11.33L5.08 11.33L5.08 9.25L7.16 9.25L7.16 11.33ZM7.16 15.5L5.08 15.5L5.08 13.41L7.16 13.41L7.16 15.5ZM7.16 19.66L5.08 19.66L5.08 17.58L7.16 17.58L7.16 19.66ZM13.41 7.16L13.41 3L3 3L3 21.75L23.83 21.75L23.83 7.16L13.41 7.16Z\" />\r\n              </svg>\r\n              <span>{item.organizationName}</span>\r\n            </div>\r\n\r\n            {reduxSelectedOrganizationId === item.id && (\r\n              <div\r\n                className={classes.controlPanel}\r\n                onClick={handleControlPanelButtonClick}\r\n              >\r\n                <svg viewBox=\"0 0 24 24\">\r\n                  <path\r\n                    d=\"M14.33 11.39L13.93 10.52L13.07 10.13C12.6 9.91 12.6 9.25 13.07 9.03L13.93 8.64L14.33 7.79C14.54 7.32 15.2 7.32 15.42 7.79L15.81 8.65L16.67 9.05C17.13 9.26 17.13 9.92 16.67 10.14L15.8 10.53L15.41 11.39C15.2 11.85 14.53 11.85 14.33 11.39ZM4.61 13.79L5 12.92L5.87 12.53C6.33 12.31 6.33 11.65 5.87 11.43L5 11.05L4.61 10.19C4.4 9.72 3.73 9.72 3.53 10.19L3.13 11.05L2.27 11.45C1.8 11.65 1.8 12.32 2.27 12.53L3.13 12.92L3.53 13.79C3.73 14.25 4.4 14.25 4.61 13.79ZM8.81 8.99L9.39 7.71L10.67 7.13C11.13 6.91 11.13 6.25 10.67 6.03L9.39 5.46L8.81 4.19C8.6 3.72 7.93 3.72 7.73 4.19L7.14 5.46L5.87 6.05C5.4 6.25 5.4 6.92 5.87 7.13L7.14 7.71L7.73 8.99C7.93 9.45 8.6 9.45 8.81 8.99ZM21.99 8.99C21.62 8.65 21.06 8.69 20.72 9.06L14.59 15.96L11.52 12.89C11.05 12.42 10.29 12.42 9.83 12.89L4.11 18.61C3.77 18.96 3.77 19.53 4.11 19.88C4.46 20.23 5.04 20.23 5.39 19.88L10.67 14.59L13.76 17.69C14.25 18.18 15.05 18.15 15.5 17.64L22.07 10.26C22.4 9.89 22.37 9.31 21.99 8.99Z\"\r\n                    fillRule=\"nonzero\"\r\n                  />\r\n                </svg>\r\n                <span>Панель управления</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        ))}\r\n        <div className={classes.line}></div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport classes from \"./Chat.module.css\";\r\nimport iconHeader from \"@image/iconHeader.svg\";\r\nimport burger from \"@image/burger.svg\";\r\nimport Section from \"./section/Section\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { usePostsHook } from '@hooks'\r\nimport { DialogContainer } from '@Custom/DialogContainer/DialogContainer.jsx'\r\nimport { useSocket } from \"@helpers/SocketContext.js\";\r\nimport { notEmpty, getPostIdRecipientSocketMessage } from '@helpers/helpers'\r\nimport { FloatButton } from \"antd\";\r\nimport arrowBack from \"@image/back_white.svg\";\r\n\r\nexport default function Chat() {\r\n  const navigate = useNavigate();\r\n\r\n  const { allChats, refetchAllChats } = usePostsHook()\r\n\r\n  const [copyChats, setCopyChats] = useState()\r\n  const [socketMessagesCount, setSocketMessagesCount] = useState(new Map());\r\n\r\n  const eventNames = useMemo(\r\n    () => [\"convertCreationEvent\", \"messageCountEvent\"],\r\n    []\r\n  ); // Мемоизация массива событий\r\n\r\n  const handleEventData = useCallback((eventName, data) => {\r\n    console.log(`Data from ${eventName}:`, data);\r\n  }, []); // Мемоизация callbac\r\n\r\n  const socketResponse = useSocket(eventNames, handleEventData);\r\n\r\n  const handleUserButtonClick = () => {\r\n    navigate(\"/user\");\r\n  };\r\n  const handleStartButtonClick = () => {\r\n    navigate(\"/pomoshnik/start\");\r\n  };\r\n\r\n  const handleItemClick = (item) => {\r\n    //dispatch(setSelectedItem(item));\r\n\r\n    navigate(`/Chat/${item.id}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!notEmpty(socketResponse?.convertCreationEvent)) return\r\n\r\n    refetchAllChats()\r\n  }, [socketResponse?.convertCreationEvent])\r\n\r\n  useEffect(() => {\r\n    if (!notEmpty(socketResponse?.messageCountEvent)) return\r\n\r\n    const response = socketResponse.messageCountEvent\r\n    const recepientId = getPostIdRecipientSocketMessage(response.host, response.lastPostInConvert);\r\n    const newMap = new Map(socketMessagesCount);\r\n\r\n    if (newMap.has(recepientId.toString())) {\r\n      newMap.set(recepientId.toString(), newMap.get(recepientId.toString()) + 1);\r\n    }\r\n    else {\r\n      newMap.set(recepientId.toString(), 1);\r\n    }\r\n\r\n    setCopyChats(getChatsWithTimeOfSocketMessage(copyChats, recepientId))\r\n    setSocketMessagesCount(newMap);\r\n  }, [socketResponse?.messageCountEvent])\r\n\r\n  useEffect(() => {\r\n    if (!notEmpty(allChats)) return\r\n\r\n    setCopyChats([...allChats])\r\n  }, [allChats])\r\n\r\n  return (\r\n    <div className={classes.contact}>\r\n      <div className={classes.header}>\r\n        <div className={classes.headerName}>контакты</div>\r\n        <img src={burger} alt=\"burger\" />\r\n      </div>\r\n      <div className={classes.search}>\r\n        <input type=\"search\" placeholder=\"поиск\"></input>\r\n      </div>\r\n      <div className={classes.main}>\r\n        <button\r\n          className={classes.btnPomoshnik}\r\n          onClick={handleStartButtonClick}\r\n        >\r\n          <img src={iconHeader} alt=\"iconHeader\" />\r\n          <span>Личный помощник</span>\r\n        </button>\r\n        <Section></Section>\r\n\r\n        <div>\r\n\r\n          {copyChats?.map((item, index) => (\r\n            <div onClick={() => handleItemClick(item)}>\r\n              <React.Fragment key={index} >\r\n                <DialogContainer\r\n                  postName={item?.postName}\r\n                  userName={item?.userFirstName + ' ' + item?.userLastName}\r\n                  avatarUrl={item?.userAvatar}\r\n                  unseenMessagesCount={\r\n                    (+item?.unseenMessagesCount) +\r\n                    (+item?.watcherUnseenCount) +\r\n                    (+socketMessagesCount.get(item?.id) || 0)\r\n                  }\r\n                ></DialogContainer>\r\n              </React.Fragment>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <button onClick={handleUserButtonClick} className={classes.btnAddUser}>\r\n          <span> Добавить пользователя </span>\r\n        </button>\r\n\r\n        {/* <FloatButton\r\n          icon={\r\n            <img src={arrowBack} alt=\"back\" style={{ width: 20, height: 20 }} />\r\n          }\r\n          type=\"primary\"\r\n          tooltip=\"Добавить пользователя\"\r\n          onClick={handleUserButtonClick}\r\n          style={{\r\n            insetInlineStart: 380,\r\n          }}\r\n        /> */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst getChatsWithTimeOfSocketMessage = (chatsArray, id) => {\r\n  if (!chatsArray) return [];\r\n\r\n  // 1. Приводим ВСЕ даты к типу Date (чтобы сравнивать одинаковые типы)\r\n  const normalizedChats = chatsArray.map(chat => ({\r\n    ...chat,\r\n    latestMessageCreatedAt: new Date(chat.latestMessageCreatedAt)\r\n  }));\r\n\r\n  // 2. Обновляем дату в нужном чате\r\n  const updatedChats = normalizedChats.map(chat =>\r\n    chat.id === id\r\n      ? { ...chat, latestMessageCreatedAt: new Date() }\r\n      : chat\r\n  );\r\n\r\n  // 3. Сортируем (теперь все latestMessageCreatedAt — объекты Date)\r\n  const sortedChats = [...updatedChats].sort((a, b) =>\r\n    b.latestMessageCreatedAt - a.latestMessageCreatedAt\r\n  );\r\n  console.warn(sortedChats)\r\n  return sortedChats;\r\n};\r\n"],"names":["Section","dispatch","useDispatch","navigate","useNavigate","organizations","isLoadingOrganization","isErrorOrganization","useOrganizationHook","reduxSelectedOrganizationId","useGetReduxOrganization","handleControlPanelButtonClick","useEffect","length","defaultOrg","localStorage","getItem","setItem","id","organizationName","reportDay","setSelectedOrganizationId","setSelectedOrganizationReportDay","_jsxs","_Fragment","children","_jsx","className","classes","section","name","block","map","item","concat","row","row_active","onClick","handleOrganizationNameButtonClick","icon","width","height","d","controlPanel","viewBox","fillRule","line","Chat","allChats","refetchAllChats","usePostsHook","copyChats","setCopyChats","useState","socketMessagesCount","setSocketMessagesCount","Map","eventNames","useMemo","handleEventData","useCallback","eventName","data","console","log","socketResponse","useSocket","notEmpty","convertCreationEvent","messageCountEvent","response","recepientId","getPostIdRecipientSocketMessage","host","lastPostInConvert","newMap","has","toString","set","get","getChatsWithTimeOfSocketMessage","contact","header","headerName","src","burger","alt","search","type","placeholder","main","btnPomoshnik","handleStartButtonClick","iconHeader","index","handleItemClick","React","DialogContainer","postName","userName","userFirstName","userLastName","avatarUrl","userAvatar","unseenMessagesCount","watcherUnseenCount","handleUserButtonClick","btnAddUser","chatsArray","sortedChats","chat","_objectSpread","latestMessageCreatedAt","Date","sort","a","b","warn"],"sourceRoot":""}