"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[171],{1268:(e,s,o)=>{o.d(s,{A:()=>c});o(5043);const t={editText:"BottomHeaders_editText__BUuuG"},l={wrapper:"ButtonAction_wrapper__S7EYo"};var i=o(3732),n=o(4530),r=o(9307),a=o(579);function d(e){let{create:s,update:o,refUpdate:t,refCreate:d}=e;return(0,a.jsxs)("div",{className:l.wrapper,children:[s&&(0,a.jsx)(r.A,{refAction:d,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:i.A,onClick:s}),o&&(0,a.jsx)(r.A,{refAction:t,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:n.A,onClick:o})]})}function c(e){let{children:s,create:o,update:l,refUpdate:i,refCreate:n}=e;return(0,a.jsxs)("div",{className:t.editText,children:[s,(0,a.jsx)(d,{create:o,update:l,refUpdate:i,refCreate:n})]})}},2171:(e,s,o)=>{o.r(s),o.d(s,{default:()=>E});var t=o(5043);const l={dialog:"CompanySchema_dialog__JsnIw",main:"CompanySchema_main__RP111",header:"CompanySchema_header__zMrnT",boldText:"CompanySchema_boldText__dP0i3",wrapper:"CompanySchema_wrapper__KbKSe"};var i=o(3216),n=o(3536),r=o.n(n),a=o(9498),d=o(7422),c=o(1268),u=o(71);o(6537);const m={wrapper:"PostSchema_wrapper__MkhCt",block:"PostSchema_block__Ed85x",nameBlock:"PostSchema_nameBlock__DZl2C",childBlock:"PostSchema_childBlock__p5DXw",customScrollbar:"PostSchema_customScrollbar__LPCZb",customScrollbarThumb:"PostSchema_customScrollbarThumb__wj4WA"};var h=o(5206),p=o(8757),v=o(579);const x=e=>{let{post:s,level:o=1,baseColor:t,setOnePost:l,setViewChildrenPost:i,setHeader:n}=e;const a=(0,p.Zt)(t,.2*o);return(0,v.jsxs)("div",{className:m.childBlock,style:{backgroundColor:a},children:[(0,v.jsxs)("div",{className:m.nameBlock,children:[(0,v.jsx)(h.Ay,{type:"link",onClick:e=>{((e,o)=>{var t,d,c,u;e.stopPropagation();const m=r().cloneDeep(o);m.color=a,console.log(m),l([m]),n({postName:null!==(t=null===s||void 0===s?void 0:s.postName)&&void 0!==t?t:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(d=null===s||void 0===s?void 0:s.divisionName)&&void 0!==d?d:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(c=s.user.firstName)&&void 0!==c?c:""} ${null!==(u=s.user.lastName)&&void 0!==u?u:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),i(!0)})(e,s)},children:null===s||void 0===s?void 0:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user?(0,v.jsxs)("h3",{children:[null===s||void 0===s?void 0:s.user.firstName," ",null===s||void 0===s?void 0:s.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),(null===s||void 0===s?void 0:s.children.length)>0&&(0,v.jsx)("div",{className:m.childBlock,children:s.children.map((e=>(0,v.jsx)(x,{post:e,level:o>2?1:o+1,baseColor:t,setOnePost:l,setViewChildrenPost:i,setHeader:n},e.id)))})]})};function j(e){var s,o;let{post:t,backgroundColor:l,setOnePost:i,setViewChildrenPost:n,setHeader:a}=e;return(0,v.jsx)("div",{className:m.wrapper,style:{backgroundColor:l},children:(0,v.jsxs)("div",{className:m.block,style:{backgroundColor:l},children:[(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"}}),(0,v.jsxs)("div",{className:m.nameBlock,children:[(0,v.jsx)(h.Ay,{"data-tour":"click-postName",type:"link",onClick:()=>{(e=>{var s,o,d,c;const u=r().cloneDeep(e);u.color=l,console.log(u),i([u]),a({postName:null!==(s=null===t||void 0===t?void 0:t.postName)&&void 0!==s?s:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(o=null===t||void 0===t?void 0:t.divisionName)&&void 0!==o?o:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==t&&void 0!==t&&t.user?`${null!==(d=t.user.firstName)&&void 0!==d?d:""} ${null!==(c=t.user.lastName)&&void 0!==c?c:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),n(!0)})(t)},children:null===t||void 0===t?void 0:t.divisionName}),(0,v.jsx)("h2",{children:null===t||void 0===t?void 0:t.postName}),(null===t||void 0===t?void 0:t.user)&&(0,v.jsxs)("h3",{children:[null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.firstName," ",null===t||void 0===t||null===(o=t.user)||void 0===o?void 0:o.lastName]})]}),(null===t||void 0===t?void 0:t.children.length)>0&&(0,v.jsx)("div",{className:m.childBlock,children:null===t||void 0===t?void 0:t.children.map((e=>(0,v.jsx)(x,{post:e,baseColor:l,setOnePost:i,setViewChildrenPost:n,setHeader:a},e.id)))})]})})}const N="BlockSchema_wrapper__o1Gp+",g="BlockSchema_block__+4XFK",C="BlockSchema_nameBlock__q8ajZ",y="BlockSchema_childBlock__T+hCE";var _=o(8345),k=o(6282),f=o(2469);const b=e=>{let{post:s,level:o=1,baseColor:t,setOnePost:l,setViewChildrenPost:i,setHeader:n}=e;const a=(0,p.Zt)(t,.2*o);return(0,v.jsxs)("div",{className:y,style:{backgroundColor:a},children:[(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(f.A,{postId:s.id}),(0,v.jsx)(h.Ay,{type:"link",onClick:e=>{((e,o)=>{var a,d,c,u;e.stopPropagation();const m=r().cloneDeep(o);m.color=t,console.log(m),l([m]),n({postName:null!==(a=null===s||void 0===s?void 0:s.postName)&&void 0!==a?a:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(d=null===s||void 0===s?void 0:s.divisionName)&&void 0!==d?d:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(c=s.user.firstName)&&void 0!==c?c:""} ${null!==(u=s.user.lastName)&&void 0!==u?u:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),i(!0)})(e,s)},children:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user?(0,v.jsxs)("h3",{children:[s.user.firstName," ",s.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),s.children.length>0&&(0,v.jsx)("div",{className:y,children:s.children.map((e=>(0,v.jsx)(b,{post:e,level:o>2?1:o+1,baseColor:t,setOnePost:l,setViewChildrenPost:i,setHeader:n},e.id)))})]})};function P(e){let{post:s,arrayColors:o,setArrayColors:l,setOnePost:i,setViewChildrenPost:n,setHeader:a}=e,d=o.get(s.id);const[c,u]=(0,t.useState)(null);return(0,v.jsx)("div",{className:N,style:{backgroundColor:c||d},children:(0,v.jsxs)("div",{className:g,style:{backgroundColor:c||d},children:[(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"},children:[(0,v.jsx)(k.A,{placement:"topLeft",content:(0,v.jsx)(p.Jz,{onColorSelect:e=>{u(e),l((o=>{const t=new Map(o);return t.set(s.id,e),t}))},selectedColor:c,colorFromBD:d}),children:(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,v.jsx)("img",{src:_.A,alt:"palette",width:"30px",height:"30px"})})}),(0,v.jsx)(f.A,{postId:s.id})]}),(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(h.Ay,{type:"link",onClick:()=>{(e=>{var o,t,l,u;const m=r().cloneDeep(e);m.color=c||d,console.log(m),i([m]),a({postName:null!==(o=null===s||void 0===s?void 0:s.postName)&&void 0!==o?o:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(t=null===s||void 0===s?void 0:s.divisionName)&&void 0!==t?t:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(l=s.user.firstName)&&void 0!==l?l:""} ${null!==(u=s.user.lastName)&&void 0!==u?u:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),n(!0)})(s)},children:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user&&(0,v.jsxs)("h3",{children:[s.user.firstName," ",s.user.lastName]})]}),s.children.length>0&&(0,v.jsx)("div",{className:y,children:s.children.map((e=>(0,v.jsx)(b,{post:e,baseColor:c||d,setOnePost:i,setViewChildrenPost:n,setHeader:a},e.id)))})]})})}var S=o(135),w=o(1638),A=o(8877),O=o(839),B=o(4863),z=o(4293);const H=e=>{let{posts:s,arrayColors:o,setArrayColors:t,setOnePost:i,setViewChildrenPost:n,setHeader:r}=e;const a=(0,p.H6)(s);return console.log(a),(0,v.jsx)("div",{className:l.wrapper,children:a.map((e=>(0,v.jsx)(P,{post:e,arrayColors:o,setArrayColors:t,setOnePost:i,setViewChildrenPost:n,setHeader:r},e.id)))})};function E(){var e,s;const{organizationId:o}=(0,i.g)(),n=(0,i.Zp)(),m=()=>{n("/pomoshnik/companySchema")},{allPosts:h=[],isLoadingGetPosts:p,isFetchingGetPosts:x,isErrorGetPosts:N}=(0,A.iV)({organizationId:o,structure:!0}),{currentOrganization:g,isLoadingOrganizationId:C,isFetchingOrganizationId:y}=(0,A.nU)({organizationId:o}),{updateOrganization:_,isLoadingUpdateOrganizationMutation:k,isSuccessUpdateOrganizationMutation:f,isErrorUpdateOrganizationMutation:b,ErrorOrganization:P,localIsResponseUpdateOrganizationMutation:E}=(0,A.YK)(),[I,V]=(0,t.useState)([]),[T,F]=(0,t.useState)([]),[U,q]=(0,t.useState)(new Map),[M,D]=(0,t.useState)(!1),[$,L]=(0,t.useState)({postName:"",divisionName:"",fullName:""}),Z=(0,t.useRef)(null),G=(0,t.useRef)(null),[K,R]=(0,t.useState)(!1),J=[{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438",target:()=>Z.current},{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>G.current},{title:"\u041f\u0430\u043b\u0438\u0442\u0440\u0430",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u0438 \u043f\u043e\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0446\u0432\u0435\u0442\u043e\u0432\u0443\u044e \u0433\u0430\u043c\u043c\u0443 \u043f\u043e\u0441\u0442\u0430",target:()=>document.querySelector('[data-tour="color-palette"]'),disabled:!document.querySelector('[data-tour="color-palette"]')},{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u043e\u0441\u0442",target:()=>document.querySelector('[data-tour="setting-button"]'),disabled:!document.querySelector('[data-tour="setting-button"]')},{title:"\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u0432 \u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435",target:()=>document.querySelector('[data-tour="click-postName"]'),disabled:!document.querySelector('[data-tour="click-postName"]')}].filter((e=>!e.target.toString().includes("querySelector")||!e.disabled));(0,t.useEffect)((()=>{r().isEqual(I,h)||V(r().cloneDeep(h))}),[h]),(0,t.useEffect)((()=>{null!==g&&void 0!==g&&g.colorCodes&&"object"===typeof g.colorCodes&&q(new Map(Object.entries(g.colorCodes)))}),[g]);const[X,Y]=(0,t.useState)(!1);return console.log("onePost"),console.log(T),(0,v.jsxs)("div",{className:l.dialog,children:[(0,v.jsx)(d.A,{name:"\u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u043e\u0432",funcActiveHint:()=>R(!0),children:(0,v.jsx)(c.A,{update:async()=>{const e={};for(const[s,o]of U)e[s]=o;await _({_id:o,colorCodes:e})},create:()=>{Y(!0)},refCreate:Z,refUpdate:G})}),(0,v.jsx)(O.Ay,{locale:z.A,children:(0,v.jsx)(B.A,{open:K,onClose:()=>R(!1),steps:J})}),(0,v.jsx)(w.A,{open:X,setOpen:Y,organizationId:o}),N?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.A,{Error:N})}):(0,v.jsx)("div",{className:l.main,children:x||p?(0,v.jsx)(u.A,{Loading:p,Fetching:x}):(0,v.jsx)(v.Fragment,{children:0===h.length?(0,v.jsxs)("div",{className:l.header,children:[(0,v.jsx)("h1",{className:l.boldText,children:"\u041f\u043e\u0441\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"}),(0,v.jsx)(a.A,{icon:(0,v.jsx)("img",{src:S.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:m,style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:l.header,children:[(0,v.jsx)("h1",{className:l.boldText,children:$.postName}),(0,v.jsx)("h2",{className:l.boldText,children:$.divisionName}),(0,v.jsx)("h3",{children:$.fullName})]}),(0,v.jsx)("div",{className:l.wrapper,children:M?(0,v.jsxs)(v.Fragment,{children:[null===(e=T[0])||void 0===e||null===(s=e.children)||void 0===s?void 0:s.map((e=>(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j,{post:e,backgroundColor:T[0].color,setOnePost:F,setViewChildrenPost:D,setHeader:L},e.id)}))),(0,v.jsx)(a.A,{icon:(0,v.jsx)("img",{src:S.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:()=>D(!1),style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(H,{posts:I,arrayColors:U,setArrayColors:q,setOnePost:F,setViewChildrenPost:D,setHeader:L}),(0,v.jsx)(a.A,{icon:(0,v.jsx)("img",{src:S.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:m,style:{insetInlineEnd:94}})]})})]})})})]})}}}]);
//# sourceMappingURL=171.5f01406c.chunk.js.map