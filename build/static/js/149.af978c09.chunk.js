"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[149],{1268:(e,t,a)=>{a.d(t,{A:()=>d});a(5043);const r={editText:"BottomHeaders_editText__BUuuG"},i={wrapper:"ButtonAction_wrapper__S7EYo"};var n=a(3732),c=a(4530),s=a(9307),o=a(579);function l(e){let{create:t,update:a,refUpdate:r,refCreate:l}=e;return(0,o.jsxs)("div",{className:i.wrapper,children:[t&&(0,o.jsx)(s.A,{refAction:l,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:t}),a&&(0,o.jsx)(s.A,{refAction:r,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:c.A,onClick:a})]})}function d(e){let{children:t,create:a,update:i,refUpdate:n,refCreate:c}=e;return(0,o.jsxs)("div",{className:r.editText,children:[t,(0,o.jsx)(l,{create:a,update:i,refUpdate:n,refCreate:c})]})}},1818:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);const r={textArea:"TextArea_textArea__W74x1",textColor:"TextArea_textColor__B5yhy"};var i=a(579);function n(e){let{value:t,onChange:a,readOnly:n}=e;return(0,i.jsx)("textarea",{className:`${r.textArea} ${n?r.textColor:""}`,value:t,onChange:e=>a(e.target.value),disabled:n})}},6451:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);const r={item:"SelectBorder_item__DiOvO",select:"SelectBorder_select__1QGX7","\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439":"SelectBorder_\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439__LTOt8","\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a":"SelectBorder_\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a__fMOp0","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e":"SelectBorder_\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e__buugC"};var i=a(579);function n(e){let{value:t,onChange:a,array:n,array1:c,arrayItem:s,prefix:o,styleSelected:l,refSelectBorder:d}=e;return(0,i.jsx)("div",{className:r.item,ref:d,children:(0,i.jsxs)("select",{name:"mySelect",value:t,onChange:e=>{a(e.target.value)},className:`${r.select} ${r[l]}`,children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e"}),null===n||void 0===n?void 0:n.map((e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("option",{value:e.id,className:r[e.state],children:[o,e[s]]},e.id)}))),null===c||void 0===c?void 0:c.map((e=>(0,i.jsxs)("option",{value:e.id,className:r[e.state],children:[o,e[s]]},e.id)))]})})}},7214:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);const r={wave:"WaveLetters_wave__2Gves"};var i=a(579);function n(e){let{letters:t}=e;const a=t.split("");return(0,i.jsx)("div",{className:r.wave,children:null===a||void 0===a?void 0:a.map(((e,t)=>(0,i.jsx)("span",{style:{"--i":t+1},children:" "===e?"\xa0\xa0":e},t)))})}},8149:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var r=a(5043);const i={dialog:"Objective_dialog__AGsZy",header:"Objective_header__CwqH2",fon:"Objective_fon__IHEX0",pomoshnikSearch:"Objective_pomoshnikSearch__n+8mY",pomoshnik:"Objective_pomoshnik__sapCt",iconBack:"Objective_iconBack__8q8he",search:"Objective_search__Bh658",spanPomoshnik:"Objective_spanPomoshnik__y01xr",editText:"Objective_editText__C2X+e",one:"Objective_one__pBzSk",two:"Objective_two__3V81z",three:"Objective_three__aW0R0",blockSelect:"Objective_blockSelect__srgvk",option:"Objective_option__ep3vm",date:"Objective_date__zCYXt",image:"Objective_image__HulAZ",main:"Objective_main__MdAhZ",editorContainer:"Objective_editorContainer__Wu4S0",deleteIcon:"Objective_deleteIcon__v66op",iconAdd:"Objective_iconAdd__23qSh",iconSave:"Objective_iconSave__W5qtA",Teaxtaera:"Objective_Teaxtaera__NpKzL",add:"Objective_add__gSb0u",nameButton:"Objective_nameButton__729Uq",text:"Objective_text__hBYIL",selectHeader:"Objective_selectHeader__ijB6q",textSelectHeader:"Objective_textSelectHeader__i6Y9X",textSelectHeaderSpan:"Objective_textSelectHeaderSpan__KHO+H",active:"Objective_active__BJlg2",activeTextSelectHeader:"Objective_activeTextSelectHeader__EILz8",select:"Objective_select__6UvrW",activeSelect:"Objective_activeSelect__u1dA5",completed:"Objective_completed__W6+iq",draft:"Objective_draft__sHPg3"};var n=a(8139),c=a.n(n),s=a(6537),o=a(71),l=a(7214),d=a(1818),_=a(7422),v=a(1268),u=a(6451),j=a(8877),x=a(839),p=a(4863),m=a(4293),h=a(579);function b(){var e,t,a,n,b;const[O,g]=(0,r.useState)(0),[S,f]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),[y,k]=(0,r.useState)([]),[B,H]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),E=(0,r.useRef)(null),T=(0,r.useRef)(null),U=(0,r.useRef)(null),I=(0,r.useRef)(null),L=(0,r.useRef)(null),[F,G]=(0,r.useState)(!1),q=[{title:"\u041a\u0420\u0410\u0422\u041a\u041e\u0421\u0420\u041e\u0427\u0410\u042f \u0426\u0415\u041b\u042c",description:"\u041a\u0420\u0410\u0422\u041a\u041e\u0421\u0420\u041e\u0427\u0410\u042f \u0426\u0415\u041b\u042c",target:()=>E.current},{title:"\u0421\u0418\u0422\u0423\u0410\u0426\u0418\u042f",description:"\u0421\u0418\u0422\u0423\u0410\u0426\u0418\u042f",target:()=>T.current},{title:"\u041f\u0420\u0418\u0427\u0418\u041d\u0410",description:"\u041f\u0420\u0418\u0427\u0418\u041d\u0410",target:()=>U.current},{title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e",description:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u043a\u0440\u0430\u0442\u043a\u043e\u0441\u0440\u043e\u0447\u043d\u043e\u0439 \u0446\u0435\u043b\u0438",target:()=>I.current},{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>L.current}],{currentObjective:M,isLoadingGetObjectiveId:R,isErrorGetObjectiveId:W,isFetchingGetObjectiveId:z,updateObjective:X,isLoadingUpdateObjectiveMutation:Y,isSuccessUpdateObjectiveMutation:Z,isErrorUpdateObjectiveMutation:$,errorUpdateObjectiveMutation:P,localIsResponseUpdateObjectiveMutation:D}=(0,j.EZ)(S),{activeAndDraftStrategies:J,archiveStrategies:K,isLoadingStrategies:Q,isErrorStrategies:V}=(0,j.Od)(),ee=(e,t,a)=>{switch(a){case"content":C((a=>{const r=[...a];return r[e]=t,r}));break;case"situation":k((a=>{const r=[...a];return r[e]=t,r}));break;case"rootCause":H((a=>{const r=[...a];return r[e]=t,r}))}};return(0,r.useEffect)((()=>{Array.isArray(M.content)&&C(M.content),Array.isArray(M.situation)&&k(M.situation),Array.isArray(M.rootCause)&&H(M.rootCause)}),[M]),(0,r.useEffect)((()=>{const e=[...K,...J].find((e=>e.id===S));w(null===e||void 0===e?void 0:e.state)}),[S]),(0,h.jsxs)("div",{className:i.dialog,children:[(0,h.jsxs)(_.A,{name:"\u041a\u0440\u0430\u0442\u043a\u043e\u0441\u0440\u043e\u0447\u043d\u0430\u044f \u0446\u0435\u043b\u044c",speedGoal:"speedGoal",funcActiveHint:()=>G(!0),children:[(0,h.jsx)("div",{className:i.selectHeader,children:[{name:"\u041a\u0420\u0410\u0422\u041a\u041e\u0421\u0420\u041e\u0427\u0410\u042f \u0426\u0415\u041b\u042c",ref:E},{name:"\u0421\u0418\u0422\u0423\u0410\u0426\u0418\u042f",ref:T},{name:"\u041f\u0420\u0418\u0427\u0418\u041d\u0410",ref:U}].map(((e,t)=>(0,h.jsx)("div",{ref:e.ref,className:c()(i.textSelectHeader,O===t&&i.activeTextSelectHeader),onClick:()=>g(t),children:(0,h.jsx)("span",{className:c()(O===t?i.active:i.textSelectHeaderSpan),children:e.name})},t)))}),(0,h.jsx)(v.A,{update:async()=>{await X({_id:M.id,situation:y,content:A,rootCause:B}).unwrap().then((()=>{})).catch((e=>{console.error("Error:",JSON.stringify(e,null,2))}))},refUpdate:L,children:(0,h.jsx)(u.A,{refSelectBorder:I,value:S,onChange:e=>{f(e)},array:J,array1:K,arrayItem:"strategyNumber",prefix:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u2116",styleSelected:N})})]}),(0,h.jsx)(x.Ay,{locale:m.A,children:(0,h.jsx)(p.A,{open:F,onClose:()=>G(!1),steps:q})}),(0,h.jsx)("div",{className:i.main,children:W||V?(0,h.jsx)(o.A,{Error:W||V}):Q||z||R?(0,h.jsx)(o.A,{Loading:Q||R,Fetching:z}):(0,h.jsx)(h.Fragment,{children:M.id?(0,h.jsxs)(h.Fragment,{children:[0===O&&(0,h.jsx)(h.Fragment,{children:A.map(((e,t)=>(0,h.jsx)(d.A,{value:e,onChange:e=>ee(t,e,"content"),readOnly:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"===N},t)))}),1===O&&(0,h.jsx)(h.Fragment,{children:y.map(((e,t)=>(0,h.jsx)(d.A,{value:e,onChange:e=>ee(t,e,"situation"),readOnly:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"===N},t)))}),2===O&&(0,h.jsx)(h.Fragment,{children:B.map(((e,t)=>(0,h.jsx)(d.A,{value:e,onChange:e=>ee(t,e,"rootCause"),readOnly:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"===N},t)))}),(0,h.jsx)(s.A,{Loading:Y,Error:$&&D,Success:Z&&D,textSuccess:"\u041a\u0440\u0430\u0442\u043a\u043e\u0441\u0440\u043e\u0447\u043d\u0430\u044f \u0446\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==P&&void 0!==P&&null!==(e=P.data)&&void 0!==e&&null!==(t=e.errors)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&null!==(n=a.errors)&&void 0!==n&&n[0]?P.data.errors[0].errors[0]:null===P||void 0===P||null===(b=P.data)||void 0===b?void 0:b.message})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.A,{letters:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e"})})})})]})}}}]);
//# sourceMappingURL=149.af978c09.chunk.js.map