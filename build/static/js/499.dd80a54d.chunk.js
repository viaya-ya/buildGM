"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[499],{543:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowLeft.cf19db7109d7a471f9a4757f06f848cb.svg"},3066:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowRight.49741dd1d1342ed4af242f97a798956a.svg"},5933:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/subbarSearch.df8e3ae4a1f8534780d8d7a0a7a27549.svg"},1268:(e,t,a)=>{a.d(t,{A:()=>d});a(5043);const l={editText:"BottomHeaders_editText__6e9Ca"},i={wrapper:"ButtonAction_wrapper__YWbBU"};var n=a(3732),r=a(4530),s=a(9307),o=a(579);function c(e){let{create:t,update:a,refUpdate:l,refCreate:c}=e;return(0,o.jsxs)("div",{className:i.wrapper,children:[t&&(0,o.jsx)(s.A,{refAction:c,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:t}),a&&(0,o.jsx)(s.A,{refAction:l,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:r.A,onClick:a})]})}function d(e){let{children:t,create:a,update:i,refUpdate:n,refCreate:r}=e;return(0,o.jsxs)("div",{className:l.editText,children:[t,(0,o.jsx)(c,{create:a,update:i,refUpdate:n,refCreate:r})]})}},997:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(5043);const i={ul:"Lupa_ul__sGB5h",li:"Lupa_li__U20di",activeText:"Lupa_activeText__HbVV8",completedText:"Lupa_completedText__vmrPv"};var n=a(5933),r=a(579);function s(e){let{setIsOpenSearch:t,isOpenSearch:a,select:s,projects:o,archivesProjects:c,projectsWithProgram:d,archivesProjectsWithProgram:u,programs:v,archivesPrograms:m,array:h,arrayItem:p,positionBottomStyle:D}=e;const g=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,r.jsxs)("div",{ref:g,children:[(0,r.jsx)("img",{src:n.A,alt:"subbarSearch",onClick:()=>{t(!0)}}),a&&(0,r.jsxs)("ul",{className:i.ul,style:{bottom:D},children:[0!==(null===o||void 0===o?void 0:o.length)&&o&&(0,r.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===o||void 0===o?void 0:o.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===c||void 0===c?void 0:c.length)&&c&&(0,r.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===c||void 0===c?void 0:c.map((e=>(0,r.jsx)("li",{value:e.id,className:i.li,onClick:()=>{s(e.id),t(!1)},children:e.projectName},e.id))),0!==(null===d||void 0===d?void 0:d.length)&&d&&(0,r.jsx)("li",{value:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.activeText,children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===d||void 0===d?void 0:d.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===u||void 0===u?void 0:u.length)&&u&&(0,r.jsx)("li",{value:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.completedText,children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===u||void 0===u?void 0:u.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===v||void 0===v?void 0:v.length)&&v&&(0,r.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===v||void 0===v?void 0:v.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===m||void 0===m?void 0:m.length)&&m&&(0,r.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===m||void 0===m?void 0:m.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),null===h||void 0===h?void 0:h.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e[p]},e.id)))]})]})}},7214:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);const l={wave:"WaveLetters_wave__DfO0r"};var i=a(579);function n(e){let{letters:t}=e;const a=t.split("");return(0,i.jsx)("div",{className:l.wave,children:null===a||void 0===a?void 0:a.map(((e,t)=>(0,i.jsx)("span",{style:{"--i":t+1},children:" "===e?"\xa0\xa0":e},t)))})}},7321:(e,t,a)=>{a.d(t,{$:()=>o});a(5043);const l={modal:"ModalSelectRadio_modal__nPGHn",modalWindow:"ModalSelectRadio_modalWindow__dncJU",header:"ModalSelectRadio_header__DW8xM",item1:"ModalSelectRadio_item1__QmdXG",item2:"ModalSelectRadio_item2__Hm1w9",search:"ModalSelectRadio_search__uW77Q",exit:"ModalSelectRadio_exit__BO5fc",table:"ModalSelectRadio_table__nysW+",row:"ModalSelectRadio_row__F5ykw"};var i=a(7583),n=a(4530),r=a(9307),s=a(579);function o(e){let{nameTable:t,handleSearchValue:a,handleSearchOnChange:o,exit:c,filterArray:d,array:u,arrayItem:v,selectedItemID:m,handleRadioChange:h,save:p}=e;return(0,s.jsx)("div",{className:l.modal,children:(0,s.jsxs)("div",{className:l.modalWindow,children:[(0,s.jsx)("img",{src:i.A,alt:"exitModal",onClick:()=>c(),className:l.exit}),(0,s.jsxs)("div",{className:l.header,children:[(0,s.jsx)("div",{className:l.item1,children:(0,s.jsx)("input",{type:"search",placeholder:"\u041d\u0430\u0439\u0442\u0438",value:a,onChange:o,className:l.search})}),p&&(0,s.jsx)("div",{className:l.item2,children:(0,s.jsx)(r.A,{name:"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:n.A,onClick:p})})]}),(0,s.jsxs)("table",{className:l.table,children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("th",{children:t})})}),d.length>0?(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===d||void 0===d?void 0:d.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>h(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})}):(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===u||void 0===u?void 0:u.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>h(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})})]})]})})}},3499:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var l=a(9379),i=a(5043);const n={dialog:"Statistic_dialog__3p+k8",header:"Statistic_header__0WBqQ",fon:"Statistic_fon__mp9n-",pomoshnikSearch:"Statistic_pomoshnikSearch__IhkrT",pomoshnik:"Statistic_pomoshnik__ZBjC4",iconBack:"Statistic_iconBack__VbWfZ",search:"Statistic_search__weHXa",spanPomoshnik:"Statistic_spanPomoshnik__KAOqo",editText:"Statistic_editText__Dtgwn",five:"Statistic_five__CDpWW",iconAdd:"Statistic_iconAdd__4xSsk",iconSave:"Statistic_iconSave__bMPKX",image:"Statistic_image__dPi6v",main:"Statistic_main__pZlqy",blockArrrow:"Statistic_blockArrrow__qUTV6",block1:"Statistic_block1__scdNa",block2:"Statistic_block2__3zM2N",block3:"Statistic_block3__VdrNQ",row2:"Statistic_row2__-odcq",row1:"Statistic_row1__9Nf40",element:"Statistic_element__qlp8v",addPoint:"Statistic_addPoint__karc2",deletePoint:"Statistic_deletePoint__Ang7u",points:"Statistic_points__bOSU9",item:"Statistic_item__pHjN+",date:"Statistic_date__dwGjg",number:"Statistic_number__i35Ys",textGrey:"Statistic_textGrey__90esK",modal:"Statistic_modal__ikwme",modalTable:"Statistic_modalTable__UcLkD",exitImage:"Statistic_exitImage__TxXI9",row:"Statistic_row__U0c21",tableHeader:"Statistic_tableHeader__iJ0kQ",iconSaveModal:"Statistic_iconSaveModal__0awh+",itemHover:"Statistic_itemHover__voA1X",active:"Statistic_active__7c46C",itemName:"Statistic_itemName__zMvcK",select:"Statistic_select__M7kmi",div:"Statistic_div__H35ux",modalDelete:"Statistic_modalDelete__z3BIT",modalDeleteElement:"Statistic_modalDeleteElement__CstRH",modalRow1:"Statistic_modalRow1__ZM8m3",modalRow2:"Statistic_modalRow2__Qflc4",btnYes:"Statistic_btnYes__W8j3Y",btnNo:"Statistic_btnNo__bF80T",textBtnYes:"Statistic_textBtnYes__Wnb2Q",textBtnNo:"Statistic_textBtnNo__YD+t8",text:"Statistic_text__6U1vl",textMontserrat:"Statistic_textMontserrat__1bMe3",tableHeading:"Statistic_tableHeading__L76cf",tableHintWrapper:"Statistic_tableHintWrapper__6Ups9"};var r=a(9103);const s={block:"Graphic_block__UHEyR",row1:"Graphic_row1__wSzYr"};var o=a(8053),c=a(579);const d=e=>{let{colorFirstPoint:t,data:a,name:l,setName:n,typeGraphic:d,type:u}=e;const v=(0,i.useRef)(),[m,h]=(0,i.useState)(l),[p,D]=(0,i.useState)(880),[g,x]=(0,i.useState)(600);return(0,i.useEffect)((()=>{h(l)}),[l]),(0,i.useEffect)((()=>{n(m)}),[m]),(0,i.useEffect)((()=>{const e=()=>{let e,t;"26"!==d&&d?"52"===d?window.innerWidth>1400?(e=1200,t=600):window.innerWidth>800&&(e=880,t=400):window.innerWidth>1400?(e=500,t=600):window.innerWidth>800&&(e=400,t=400):window.innerWidth>1400?(e=900,t=600):window.innerWidth>800&&(e=700,t=400),D(e),x(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[d]),(0,i.useEffect)((()=>{a.sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate)));const e=40,l=30,i=80,n=50,s=(r.jkA(a,(e=>e.value)),1.1*r.T9B(a,(e=>e.value))),c=r.hqK().domain(a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(e.valueDate,d)))).range([n,p-l]).padding(0),m="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?r.m4Y().domain([0,s]).nice().range([e,g-i]):r.m4Y().domain([0,s]).nice().range([g-i,e]),h=r.n8j().x((e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(e.valueDate,d)))).y((e=>m(e.value))).defined((e=>null!==e.value));r.Ltv(v.current).selectAll("*").remove();const D=r.Ltv(v.current).attr("width",p).attr("height",g),x=a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(e.valueDate,d))),S=m.ticks(5);D.selectAll(".grid-vertical").data(x).enter().append("line").attr("class","grid-vertical").attr("x1",(e=>c(e))).attr("x2",(e=>c(e))).attr("y1",e).attr("y2",g-i).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3),D.selectAll(".grid-horizontal").data(S).enter().append("line").attr("class","grid-horizontal").attr("x1",n).attr("x2",p-l).attr("y1",(e=>m(e))).attr("y2",(e=>m(e))).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3);const _=r.l78(c);D.append("g").attr("transform","translate(0,".concat(g-i,")")).call(_).selectAll("text").attr("transform","rotate(-90)").attr("text-anchor","end").attr("dx","-10px").attr("dy","-5px").style("font-weight","bold").style("font-size","12px"),D.append("g").attr("transform","translate(".concat(n,",0)")).call(r.V4s(m).ticks(5).tickFormat(r.GPZ(".2s"))),a.forEach(((e,t)=>{if(t>0){const l=a[t-1].value,i="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?e.value<l?"blue":"red":e.value<l?"red":"blue";D.append("path").datum([a[t-1],e]).attr("fill","none").attr("stroke",i).attr("stroke-width",2).attr("d",h)}}));const w=(e,l)=>{if(0===l){if(void 0===t||null===t)return"blue";return e>=t?"blue":"red"}if(l>0){const t=a[l-1].value;return"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?e<t?"blue":"red":e<t?"red":"blue"}return"blue"};D.selectAll("circle").data(a).enter().append("circle").attr("cx",(e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(e.valueDate,d)))).attr("cy",(e=>m(e.value))).attr("r",5).attr("fill",((e,t)=>w(e.value,t))).on("mouseover",((t,i)=>{r.Ltv(t.currentTarget).attr("r",7).attr("fill","orange");const s=c(""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(i.valueDate,d)),u=m(i.value)-15,v="\u0414\u0430\u0442\u0430: ".concat(""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,o.A)(i.valueDate,d)),h="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435: ".concat(i.value),g=6*Math.max(v.length,h.length),x=Math.max(120,g+20),S=u-50<e;let _=s;s+x/2>p-l?_=p-l-x/2:s-x/2<n&&(_=n+x/2);const y=S?u+50:u,f=w(i.value,a.indexOf(i)),j=D.append("g").attr("id","tooltip").attr("transform","translate(".concat(_,", ").concat(y,")"));j.append("rect").attr("x",-x/2).attr("y",S?0:-50).attr("width",x).attr("height",50).attr("fill",f).attr("rx",4).attr("ry",4),j.append("text").attr("text-anchor","middle").attr("y",S?15:-30).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(v),j.append("text").attr("text-anchor","middle").attr("y",S?35:-10).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(h)})).on("mouseout",(e=>{const t=r.Ltv(e.currentTarget).datum(),l=a.indexOf(t);r.Ltv(e.currentTarget).attr("r",5).attr("fill",w(t.value,l)),D.select("#tooltip").remove()}))}),[t,a,p,g,u]),(0,c.jsxs)("div",{className:s.block,children:[(0,c.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),className:s.row1}),(0,c.jsx)("svg",{ref:v,className:s.row2})]})};var u=a(4530),v=a(543),m=a(3066);const h=a.p+"static/media/trash.e43fc72493c601ddd54c3b32aba5840c.svg";var p=a(3732),D=a(7383),g=a(6537),x=a(71),S=a(7583),_=a(7214),w=a(7422),y=a(1268),f=a(2941),j=a(917),N=a(997),T=a(7321),b=a(8877),A=a(3536),k=a.n(A);function M(){var e,t,a,r,s,A,M,F,Y,I,C,O,E,L,P,W;const[R,U]=(0,i.useState)(),{reduxSelectedOrganizationId:z,reduxSelectedOrganizationReportDay:B,currentOrganization:G,isLoadingOrganizationId:H,isFetchingOrganizationId:V,updateOrganization:q,isLoadingUpdateOrganizationMutation:Q,isSuccessUpdateOrganizationMutation:J,isErrorUpdateOrganizationMutation:K,ErrorOrganization:X,localIsResponseUpdateOrganizationMutation:Z}=(0,b.wL)(),[$,ee]=(0,i.useState)(!1),[te,ae]=(0,i.useState)(!1),[le,ie]=(0,i.useState)(""),[ne,re]=(0,i.useState)(),[se,oe]=(0,i.useState)(),[ce,de]=(0,i.useState)(),[ue,ve]=(0,i.useState)(""),[me,he]=(0,i.useState)([]),[pe,De]=(0,i.useState)([]),[ge,xe]=(0,i.useState)([]),[Se,_e]=(0,i.useState)(B);(0,i.useEffect)((()=>{void 0!==B&&null!==B&&_e(B)}),[B]);const[we,ye]=(0,i.useState)("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"),[fe,je]=(0,i.useState)(!1),[Ne,Te]=(0,i.useState)([]),[be,Ae]=(0,i.useState)([]),[ke,Me]=(0,i.useState)(!1),[Fe,Ye]=(0,i.useState)(null),[Ie,Ce]=(0,i.useState)(0),[Oe,Ee]=(0,i.useState)(!1),[Le,Pe]=(0,i.useState)(),[We,Re]=(0,i.useState)(),[Ue,ze]=(0,i.useState)([]),{statistics:Be,isLoadingGetStatistics:Ge,isFetchingGetStatistics:He,isErrorGetStatistics:Ve,currentStatistic:qe,statisticDatas:Qe,isLoadingGetStatisticId:Je,isErrorGetStatisticId:Ke,isFetchingGetStatisticId:Xe,updateStatistics:Ze,isLoadingUpdateStatisticMutation:$e,isSuccessUpdateStatisticMutation:et,isErrorUpdateStatisticMutation:tt,ErrorUpdateStatisticMutation:at,localIsResponseUpdateStatisticsMutation:lt,postStatistics:it,isLoadingPostStatisticMutation:nt,isSuccessPostStatisticMutation:rt,isErrorPostStatisticMutation:st,ErrorPostStatisticMutation:ot,localIsResponsePostStatisticsMutation:ct}=(0,b.SE)({statisticData:!0,statisticId:le}),{allPosts:dt,isLoadingGetPosts:ut,isErrorGetPosts:vt}=(0,b.es)(),{selectedID:mt,handleRadioChange:ht,handleInputChangeModalSearch:pt,filterArraySearchModal:Dt,inputSearchModal:gt}=(0,b.I7)({array:dt,arrayItem:"postName"}),xt=(e,t,a,i,n)=>{if("received"===e){const e=[...me];e[i][a]="value"===a?Number(t):t,he(e)}else xe((e=>{const i=e.map((e=>e.id===n?"value"===a?(0,l.A)((0,l.A)({},e),{},{value:Number(t)}):(0,l.A)((0,l.A)({},e),{},{valueDate:t}):e));return i.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))),i}))};const St=async()=>{var e;const t={};if(0!=Object.keys(qe).length){if(se!==(null===qe||void 0===qe?void 0:qe.type)&&(t.type=se),ne!==(null===qe||void 0===qe?void 0:qe.name)&&(t.name=ne),ce!==(null===qe||void 0===qe||null===(e=qe.post)||void 0===e?void 0:e.id)&&(t.postId=ce),ue!==(null===qe||void 0===qe?void 0:qe.description)&&(t.description=ue),ge.length>0){const e=ge.filter((e=>""!==e.value));if(e.length>0){const a=e.map((e=>({value:e.value,valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=a}}if(me.length>0){const e=function(e,t){const a=[];return t.forEach((t=>{const i=e.find((e=>e.id===t.id));if(i){const e={};["value","valueDate"].forEach((a=>{t[a]!==i[a]&&(e[a]="valueDate"==a?new Date(t[a]):t[a])})),Object.keys(e).length>0&&a.push((0,l.A)({_id:t.id},e))}})),a}(pe,me);e.length>0&&(t.statisticDataUpdateDtos=[],t.statisticDataUpdateDtos.push(...e))}Object.keys(t).length>0&&await Ze((0,l.A)({statisticId:le,_id:le},t)).unwrap().then((()=>{t.name,Ee(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}};(0,i.useEffect)((()=>{je("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"!==we)}),[we]),(0,i.useEffect)((()=>{var e;null!==qe&&void 0!==qe&&qe.name&&re(qe.name),null!==qe&&void 0!==qe&&qe.type&&oe(qe.type),null!==qe&&void 0!==qe&&qe.description&&ve(qe.description),null!==qe&&void 0!==qe&&null!==(e=qe.post)&&void 0!==e&&e.id&&de(qe.post.id)}),[qe.id]);const _t=()=>{const e=Qe.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear(),"-").concat(a.getMonth()+1);var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setFullYear((new Date).getFullYear()-12+Ie))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{});return Object.keys(e).map((t=>{const{id:a,valueSum:l,year:i,month:n,correlationType:r}=e[t],s=new Date(i,n,0).getDate();return{id:a||null,valueDate:"".concat(i,"-").concat(n,"-").concat(s),value:l,correlationType:r}}))};(0,i.useEffect)((()=>{if(Qe.length){if(he([]),xe([]),De([]),Te([]),Ae([]),Ce(0),ze([]),"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===we){var e;const t=new Date,a=t.getDay(),i=new Date(t);let n;n=a>=Se?a-Se:7-(Se-a),i.setDate(t.getDate()-n);const r=new Date(i);r.setDate(i.getDate()+7);const s=[];for(let e=new Date(i);e<r;e.setDate(e.getDate()+1))s.push(new Date(e).toISOString().split("T")[0]);const o=null===Qe||void 0===Qe||null===(e=Qe.filter((e=>{const t=null!==e&&void 0!==e&&e.valueDate?new Date(e.valueDate):null;if(isNaN(null===t||void 0===t?void 0:t.getTime()))return!1;const a=i instanceof Date&&!isNaN(i.getTime()),l=r instanceof Date&&!isNaN(r.getTime());if(!a||!l)return!1;const n=t.toISOString().split("T")[0],s=i.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s<=n&&n<o&&null===e.correlationType})))||void 0===e?void 0:e.map((e=>{var t;return(0,l.A)((0,l.A)({},e),{},{valueDate:null===(t=e.valueDate)||void 0===t?void 0:t.split("T")[0]})})),c=[],d=[],u=[];s.forEach((e=>{const t=o.find((t=>t.valueDate===e));t?(c.push(t),d.push((0,l.A)({},t))):u.push({id:e,valueDate:e,value:""})})),c.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),d.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),u.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),De(d),he(c),xe(u),wt(i)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we){const e=Qe.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));ze(e);const a=Qe.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear(),"-").concat(a.getMonth()+1);var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setMonth((new Date).getMonth()-13))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{}),i=[];for(let n=0;n<13;n++){var t;const e=new Date;e.setMonth(e.getMonth()-n);const r="".concat(e.getFullYear(),"-").concat(e.getMonth()+1);a[r]||(a[r]={valueSum:0,year:e.getFullYear(),month:e.getMonth()+1});const s=new Date(e.getFullYear(),e.getMonth()+1,0),o=s.getFullYear(),c=s.getMonth()+1,d=s.getDate();i.push((0,l.A)({id:(null===(t=a[r])||void 0===t?void 0:t.id)||null,valueDate:"".concat(o,"-").concat(c,"-").concat(d),value:a[r].valueSum},a[r].correlationType?{correlationType:a[r].correlationType}:{}))}i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),he(i),wt()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we){const e=Qe.filter((e=>"\u0413\u043e\u0434"===e.correlationType));ze(e);const t=_t(),i=null===Qe||void 0===Qe?void 0:Qe.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12<new Date(e.valueDate).getFullYear())),n=t.reduce(((e,t)=>{var a;const l=new Date(t.valueDate),n="".concat(l.getFullYear()),r=i.find((e=>new Date(e.valueDate).getFullYear()===l.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:l.getFullYear()}),null!==(a=e[n])&&void 0!==a&&a.correlationType||(e[n].valueSum+=t.value),e)}),{}),r=i.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear());return new Date((new Date).setFullYear((new Date).getFullYear()-12))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),s=k().merge({},n,r),o=[];for(let c=0;c<12;c++){var a;const e=new Date;e.setFullYear(e.getFullYear()-c);const t="".concat(e.getFullYear());s[t]||(s[t]={valueSum:0,year:e.getFullYear()}),o.push((0,l.A)({id:(null===(a=s[t])||void 0===a?void 0:a.id)||null,valueDate:"".concat(e.getFullYear(),"-01-01"),value:s[t].valueSum},s[t].correlationType?{correlationType:s[t].correlationType}:{}))}o.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),he(o),wt()}if("13"===we||"26"===we||"52"===we){const e=new Date,t=new Date(e),a=new Date;a.setDate(e.getDate()-7*(Number(we)+1));const i=parseInt(Se);if(isNaN(i))throw new Error("selectedDayOfWeek \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c.");const n=[];let r=new Date(a);for(;r.getDay()!==i;)r.setDate(r.getDate()+1);for(;r<=t;){const t=new Date(r);t.setDate(r.getDate()+7);const a=Qe.filter((e=>{const a=new Date(e.valueDate),l=r<=a&&a<t&&null===e.correlationType;return l&&Te((t=>[...t,e])),l})).reduce(((e,t)=>e+t.value),0),i=new Date(t.getTime()+864e5);i<=e&&(Te((e=>e.map((e=>e.myID?(0,l.A)({},e):(0,l.A)((0,l.A)({},e),{},{myID:i.toISOString().split("T")[0]}))))),n.push({value:a,valueDate:i.toISOString().split("T")[0]})),r=t}he(n.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}}),[qe.id,Je,Xe,we]);const wt=e=>{if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===we){const t=new Date(e);t.setDate(t.getDate()+(Ie-1));const a=Qe.find((e=>new Date(e.valueDate).toISOString().split("T")[0]===t.toISOString().split("T")[0]));U(null===a||void 0===a?void 0:a.value)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we){const e=Qe.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear(),"-").concat(a.getMonth()+1),i=new Date;i.setMonth(i.getMonth()-13+Ie);const n=new Date;var r;(n.setMonth(n.getMonth()-12+Ie),!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&a>=i&&a<=n)&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(r=e[l])&&void 0!==r&&r.correlationType||(e[l].valueSum+=t.value));return e}),{}),t=Object.values(e)[0];console.log("firstMonthData",t),t&&U(t.valueSum)}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we){const e=_t(),t=(new Date).getFullYear()-12+Ie,a=null===Qe||void 0===Qe?void 0:Qe.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&t==new Date(e.valueDate).getFullYear())),l=e.reduce(((e,t)=>{var l;const i=new Date(t.valueDate),n="".concat(i.getFullYear()),r=a.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:i.getFullYear()}),null!==(l=e[n])&&void 0!==l&&l.correlationType||(e[n].valueSum+=t.value),e)}),{}),i=a.reduce(((e,a)=>{const l=new Date(a.valueDate).getFullYear(),i="".concat(l);return t===l&&(e[i]||(e[i]={id:a.id,valueSum:a.value,correlationType:a.correlationType})),e}),{}),n=k().merge({},l,i),r=Object.values(n)[0];console.log("firstYearData",r),r&&U(r.valueSum)}};(0,i.useEffect)((()=>{(()=>{if(he([]),Te([]),Ae([]),ze([]),Qe.length){if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===we){const e=new Date,t=e.getDay(),a=new Date(e);let i;i=t>=Se?t-Se:7-(Se-t),a.setDate(e.getDate()-i);const n=new Date(e);n.setDate(e.getDate()-7),a<n&&a.setTime(n.getTime());const r=[];for(let l=Ie;l<7+Ie;l++){const t=new Date(a);t.setDate(e.getDate()+l),r.push(t.toISOString().split("T")[0]),l===Ie&&wt(a)}const s=Qe.reduce(((e,t)=>{const a=t.valueDate.split("T")[0];return t.correlationType||(e[a]=(0,l.A)((0,l.A)({},t),{},{valueDate:a})),e}),{}),o=r.map((e=>s[e]&&null===s[e].correlationType?s[e]:{id:e,valueDate:e,value:""})),c=o.filter((e=>""===e.value)),d=o.filter((e=>""!==e.value)),u=d.map((e=>(0,l.A)({},e)));De(u),he(d),xe(c)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we){const t=Qe.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));ze(t);const a=Qe.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear(),"-").concat(a.getMonth()+1);var i;return!isNaN(a)&&new Date((new Date).setMonth((new Date).getMonth()-14+Ie))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value)),e}),{}),i=[];for(let n=(new Date).getMonth()-14+Ie;n<=Ie;n++){var e;const t=new Date;t.setMonth(t.getMonth()+n);const r="".concat(t.getFullYear(),"-").concat(t.getMonth()+1);a[r]||(a[r]={valueSum:0,year:t.getFullYear(),month:t.getMonth()+1});const s=new Date(t.getFullYear(),t.getMonth()+1,0),o=s.getFullYear(),c=s.getMonth()+1,d=s.getDate();i.push((0,l.A)({id:(null===(e=a[r])||void 0===e?void 0:e.id)||null,valueDate:"".concat(o,"-").concat(c,"-").concat(d),value:a[r].valueSum},a[r].correlationType?{correlationType:a[r].correlationType}:{}))}i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),he(i),wt()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we){const e=Qe.filter((e=>"\u0413\u043e\u0434"===e.correlationType));ze(e);const a=_t(),i=null===Qe||void 0===Qe?void 0:Qe.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12+Ie<new Date(e.valueDate).getFullYear())),n=a.reduce(((e,t)=>{var a;const l=new Date(t.valueDate),n="".concat(l.getFullYear()),r=i.find((e=>new Date(e.valueDate).getFullYear()===l.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:l.getFullYear()}),null!==(a=e[n])&&void 0!==a&&a.correlationType||(e[n].valueSum+=t.value),e)}),{}),r=i.reduce(((e,t)=>{const a=new Date(t.valueDate),l="".concat(a.getFullYear());return new Date((new Date).setFullYear((new Date).getFullYear()-12+Ie))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),s=k().merge({},n,r),o=[];for(let c=(new Date).getFullYear()-11+Ie;c<=(new Date).getFullYear()+Ie;c++){var t;const e=new Date;e.setFullYear(c);const a="".concat(e.getFullYear());s[a]||(s[a]={valueSum:0,year:e.getFullYear()}),o.push((0,l.A)({id:(null===(t=s[a])||void 0===t?void 0:t.id)||null,valueDate:"".concat(e.getFullYear(),"-01-01"),value:s[a].valueSum},s[a].correlationType?{correlationType:s[a].correlationType}:{}))}o.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),console.log("updatedYearPoints",o),he(o)}if("13"===we||"26"===we||"52"===we){const e=new Date;e.setDate(e.getDate()+7*Ie);const t=new Date(e),a=new Date(t);a.setDate(t.getDate()-7*(Number(we)+1));const i=parseInt(Se),n=[];let r=new Date(a),s=0;for(;r.getDay()!==i;)r.setDate(r.getDate()+1);for(;r<=t;){const t=new Date(r);t.setDate(r.getDate()+7),s=Qe.filter((e=>{const a=new Date(e.valueDate);return r<=a&&a<t&&null===e.correlationType&&Te((t=>[...t,e])),r<=a&&a<t&&null===e.correlationType})).reduce(((e,t)=>e+t.value),0);const a=new Date(t.getTime()+864e5);a<=e&&(Te((e=>e.map((e=>e.myID?(0,l.A)({},e):(0,l.A)((0,l.A)({},e),{},{myID:a.toISOString().split("T")[0]}))))),n.push({value:s,valueDate:a.toISOString().split("T")[0]})),r=t}he(n.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}})()}),[Ie]);const yt=(e,t)=>{switch(Number(e)){case 0:t("\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435");break;case 1:t("\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a");break;case 2:t("\u0412\u0442\u043e\u0440\u043d\u0438\u043a");break;case 3:t("\u0421\u0440\u0435\u0434\u0430");break;case 4:t("\u0427\u0435\u0442\u0432\u0435\u0440\u0433");break;case 5:t("\u041f\u044f\u0442\u043d\u0438\u0446\u0430");break;case 6:t("\u0421\u0443\u0431\u0431\u043e\u0442\u0430")}},ft=async()=>{await q({_id:z,reportDay:Number(Se)}).unwrap().then((()=>{Ee(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},jt=e=>{ie(e)};return(0,c.jsxs)("div",{className:n.dialog,children:[(0,c.jsx)(w.A,{name:"\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",children:(0,c.jsx)(y.A,{create:()=>{ee(!0)},update:()=>{console.log("reportDay =".concat(Se)),console.log("currentOrganization?.reportDay =".concat(null===G||void 0===G?void 0:G.reportDay)),Se!=(null===G||void 0===G?void 0:G.reportDay)?(Ee(!0),yt(Se,Pe),yt(null===G||void 0===G?void 0:G.reportDay,Re)):St()},children:(0,c.jsx)(f.A,{name:"\u041e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c",value:Se,onChange:_e,array:[{id:1,value:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a"},{id:2,value:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a"},{id:3,value:"\u0421\u0440\u0435\u0434\u0430"},{id:4,value:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433"},{id:5,value:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430"},{id:6,value:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430"},{id:0,value:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"}],arrayItem:"value"})})}),(0,c.jsx)("div",{className:n.main,children:Ve&&vt?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(x.A,{Error:Ve||vt})}):(0,c.jsx)(c.Fragment,{children:Ke?(0,c.jsx)(x.A,{Error:Ke}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.A,{Loading:Ge,Fetching:He}),(0,c.jsx)(x.A,{Loading:ut}),Xe||Je?(0,c.jsx)(x.A,{Loading:Je,Fetching:Xe}):(0,c.jsxs)(c.Fragment,{children:[qe.id?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:n.block1,children:[(0,c.jsx)(d,{colorFirstPoint:R,data:[...me,...ge],name:ne,setName:re,typeGraphic:we,type:se}),(0,c.jsxs)("div",{className:n.blockArrrow,children:[(0,c.jsx)("div",{className:n.statisticsArrow,children:(0,c.jsx)("img",{src:v.A,alt:"statisticsArrowLeftWhite",onClick:()=>{Ce((e=>e-1))}})}),(0,c.jsx)("div",{className:n.statisticsArrow,children:(0,c.jsx)("img",{src:m.A,alt:"statisticsArrowRightWhite",onClick:()=>{Ce((e=>e+1))}})})]})]}),(0,c.jsxs)("div",{className:n.block2,children:[(0,c.jsx)("div",{className:n.addPoint,onClick:()=>{xe((e=>[{valueDate:"",value:0,id:new Date},...e]))},children:(0,c.jsx)("img",{src:p.A,alt:"addBlock"})}),""!==le?(0,c.jsxs)("div",{className:n.points,children:[null===ge||void 0===ge||null===(e=ge.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))))||void 0===e?void 0:e.map(((e,t)=>(""===e.valueDate&&(e.valueDate=(new Date).toISOString().split("T")[0]),(0,c.jsxs)("div",{className:n.item,children:[(0,c.jsx)("input",{type:"date",value:e.valueDate,onChange:t=>{xt("",t.target.value,"valueDate",null,e.id)},className:n.date}),(0,c.jsx)("input",{type:"text",value:e.value,inputMode:"numeric",placeholder:"\u2014",onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,"");xt("",a,"value",null,e.id)},className:n.number})]},t)))),null===me||void 0===me?void 0:me.map(((e,t)=>"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===we?(0,c.jsxs)("div",{className:n.item,children:[(0,c.jsx)("input",{type:"date",value:e.valueDate,onChange:e=>{xt("received",e.target.value,"valueDate",t,null)},className:"".concat(n.date),disabled:fe}),(0,c.jsx)("input",{type:"text",value:e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");xt("received",a,"value",t,null)},className:n.number,disabled:fe})]},t):(0,c.jsxs)("div",{className:"".concat(n.item,"  ").concat(n.itemHover,"  ").concat(Fe===t?n.active:""),onClick:()=>{Ye(t),(e=>{Me(!0);const t=new Date(e);let a=new Date(e);if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we){const e=Ue.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Ae(e):Ae((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we){const e=Ue.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Ae(e):Ae((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"!==we&&"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"!==we){a.setDate(t.getDate()-7);const l=Ne.filter((t=>t.myID===e)).sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate))),i=[];if(l.length<7){for(;a<t;){const e=l.find((e=>new Date(e.valueDate).toDateString()===a.toDateString()));e?i.push(e):i.push({valueDate:a.toISOString(),value:""}),a.setDate(a.getDate()+1)}Ae(i)}else Ae(l)}})(e.valueDate)},children:[(0,c.jsx)("span",{disabled:fe,className:"".concat(n.date," ").concat(n.textGrey),children:(0,o.A)(e.valueDate,we)}),(0,c.jsx)("span",{className:"".concat(n.number," ").concat(n.textGrey),disabled:fe,children:e.value})]},t)))]}):(0,c.jsx)(c.Fragment,{}),(0,c.jsx)("div",{className:n.deletePoint,onClick:()=>{xe((e=>e.slice(0,-1)))},children:(0,c.jsx)("img",{src:h,alt:"trash"})})]}),(0,c.jsxs)("div",{className:n.block3,children:[(0,c.jsxs)("div",{className:n.row1,children:[(0,c.jsx)(j.A,{name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:ne,onChange:re,children:(0,c.jsx)(N.A,{setIsOpenSearch:ae,isOpenSearch:te,select:jt,array:Be,arrayItem:"name",positionBottomStyle:"0"})}),(0,c.jsx)(f.A,{name:"\u0422\u0438\u043f",value:se,onChange:oe,array:[{id:"\u041f\u0440\u044f\u043c\u0430\u044f",value:"\u041f\u0440\u044f\u043c\u0430\u044f"},{id:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f",value:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"}],arrayItem:"value"}),(0,c.jsx)(f.A,{name:"\u041f\u043e\u0441\u0442",value:ce,onChange:de,array:dt,arrayItem:"postName"}),(0,c.jsx)(f.A,{name:"\u0413\u0440\u0430\u0444\u0438\u043a",value:we,onChange:ye,array:[{id:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",value:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",view:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"},{id:"13",value:"13",view:"13 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"26",value:"26",view:"26 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"52",value:"52",view:"52 \u043d\u0435\u0434\u0435\u043b\u0438"}],arrayItem:"view"})]}),(0,c.jsx)("div",{className:n.row2,children:(0,c.jsx)("textarea",{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c",value:ue,onChange:e=>ve(e.target.value),className:n.textMontserrat})})]}),(0,c.jsx)(g.A,{Loading:nt,Error:st&&ct,Success:rt&&ct,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==ot&&void 0!==ot&&null!==(t=ot.data)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&null!==(s=r.errors)&&void 0!==s&&s[0]?ot.data.errors[0].errors[0]:null===ot||void 0===ot||null===(A=ot.data)||void 0===A?void 0:A.message}),(0,c.jsx)(g.A,{Loading:$e,Error:tt&&lt,Success:et&&lt,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==at&&void 0!==at&&null!==(M=at.data)&&void 0!==M&&null!==(F=M.errors)&&void 0!==F&&null!==(Y=F[0])&&void 0!==Y&&null!==(I=Y.errors)&&void 0!==I&&I[0]?at.data.errors[0].errors[0]:null===at||void 0===at||null===(C=at.data)||void 0===C?void 0:C.message}),ke&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:n.modal,children:(0,c.jsxs)("table",{className:n.modalTable,children:[(0,c.jsxs)("div",{className:n.tableHeader,children:["\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we?(0,c.jsxs)("div",{className:n.tableHeading,children:[(0,c.jsx)("span",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430 \u043c\u0435\u0441\u044f\u0446"}),(0,c.jsx)("div",{className:n.tableHintWrapper,children:(0,c.jsx)("img",{src:D.A,alt:"hint",className:n.tableHint})})]}):(0,c.jsx)("div",{className:""}),(0,c.jsx)("div",{className:n.iconSaveModal,children:(0,c.jsx)("img",{src:u.A,alt:"Blacksavetmp",className:n.image,onClick:()=>{(async e=>{const t={};if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we)if(e[0].id){const a=e.map((e=>(0,l.A)((0,l.A)({_id:e.id,value:e.value,valueDate:e.valueDate},"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we?{correlationType:e.correlationType}:{}),"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we?{correlationType:e.correlationType}:{})));t.statisticDataUpdateDtos=a}else{const a=e.map((e=>(0,l.A)((0,l.A)((0,l.A)({},e),{},{valueDate:new Date(e.valueDate)},"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we?{correlationType:e.correlationType}:{}),"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we?{correlationType:e.correlationType}:{})));t.statisticDataCreateDtos=a}else{const a=e.filter((e=>""!=e.value)),i=a.filter((e=>!e.id)),n=a.filter((e=>e.id)).map((e=>({_id:e.id,value:e.value,valueDate:e.valueDate})));if(i.length>0){const e=i.map((e=>(0,l.A)((0,l.A)({},e),{},{valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=e}n.length>0&&(t.statisticDataUpdateDtos=n)}await Ze((0,l.A)({statisticId:le,_id:le},t)).unwrap().then((()=>{Me(!1),Ye(null)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})(be)}})})]}),(0,c.jsx)("img",{src:S.A,alt:"exit",onClick:()=>{Ae([]),Ye(null),Me(!1)},className:n.exitImage}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),(0,c.jsx)("th",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),(0,c.jsx)("tbody",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:null===be||void 0===be?void 0:be.map((e=>(0,c.jsx)("div",{className:n.row,children:(0,c.jsx)("span",{className:"".concat(n.date," ").concat(n.textGrey),children:(0,o.A)(e.valueDate,we)})},e.id)))}),(0,c.jsx)("td",{children:null===be||void 0===be?void 0:be.map(((e,t)=>(0,c.jsx)("div",{className:n.row,children:(0,c.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"\u2014",value:null===e.value||""===e.value?"":e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");((e,t)=>{if(t<0||t>=be.length)return;const a=be.map((e=>(0,l.A)({},e)));a[t]=(0,l.A)((0,l.A)((0,l.A)({},a[t]),{},{value:null===e?"":Number(e)},"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===we?{correlationType:"\u0413\u043e\u0434"}:{}),"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===we?{correlationType:"\u041c\u0435\u0441\u044f\u0446"}:{}),Ae(a)})(""===a?null:a,t)}})},e.id)))})]})})]})})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_.A,{letters:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),(0,c.jsx)("div",{className:n.block1}),(0,c.jsx)("div",{className:n.block2}),(0,c.jsxs)("div",{className:n.block3,children:[(0,c.jsx)("div",{className:n.row1,children:(0,c.jsx)(j.A,{name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:ne,onChange:re,children:(0,c.jsx)(N.A,{setIsOpenSearch:ae,isOpenSearch:te,select:jt,array:Be,arrayItem:"name",positionBottomStyle:"0"})})}),(0,c.jsx)("div",{className:n.row2,children:(0,c.jsx)("textarea",{disabled:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})]})]}),Oe&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:n.modalDelete,children:(0,c.jsxs)("div",{className:n.modalDeleteElement,children:[(0,c.jsx)("img",{src:S.A,alt:"exit",className:n.exitImage,onClick:()=>Ee(!1)}),(0,c.jsx)("div",{className:n.modalRow1,children:(0,c.jsxs)("span",{className:n.text,children:["\u0412\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438 \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0441 ",(0,c.jsx)("span",{children:" "}),(0,c.jsx)("span",{style:{fontWeight:"700"},children:We}),(0,c.jsx)("span",{children:" \u043d\u0430 "}),(0,c.jsx)("span",{style:{fontWeight:"700"},children:Le}),". \u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435, \u0442\u043e \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0443 \u0432\u0441\u0435\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438."]})}),(0,c.jsxs)("div",{className:n.modalRow2,children:[(0,c.jsx)("button",{className:"".concat(n.btnYes," ").concat(n.textBtnYes),onClick:async()=>{try{await ft(),localStorage.setItem("reportDay",Number(Se)),Ee(!1),await new Promise((e=>setTimeout(e,1500))),await St()}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439:",e)}},children:"\u0414\u0430"}),(0,c.jsx)("button",{className:"".concat(n.btnNo," ").concat(n.textBtnNo),onClick:()=>{St()},children:"\u041d\u0435\u0442"})]})]})})}),(0,c.jsx)(g.A,{Loading:Q,Error:K&&Z,Success:J&&Z,textSuccess:"\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0441\u044f \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0443 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 ".concat(Le),textError:null!==X&&void 0!==X&&null!==(O=X.data)&&void 0!==O&&null!==(E=O.errors)&&void 0!==E&&null!==(L=E[0])&&void 0!==L&&null!==(P=L.errors)&&void 0!==P&&P[0]?X.data.errors[0].errors[0]:null===X||void 0===X||null===(W=X.data)||void 0===W?void 0:W.message}),$&&(0,c.jsx)(T.$,{nameTable:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430",handleSearchValue:gt,handleSearchOnChange:pt,handleRadioChange:ht,exit:()=>{ee(!1)},filterArray:Dt,array:dt,arrayItem:"postName",selectedItemID:mt,save:async()=>{await it({name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",postId:mt}).unwrap().then((e=>{ie(e.id),ee(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}})]})]})})})]})}}}]);
//# sourceMappingURL=499.dd80a54d.chunk.js.map