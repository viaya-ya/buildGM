"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[936],{1268:(e,t,a)=>{a.d(t,{A:()=>c});a(5043);const o={editText:"BottomHeaders_editText__BUuuG"},n={wrapper:"ButtonAction_wrapper__S7EYo"};var r=a(3732),l=a(4530),i=a(9307),s=a(579);function d(e){let{create:t,update:a,refUpdate:o,refCreate:d}=e;return(0,s.jsxs)("div",{className:n.wrapper,children:[t&&(0,s.jsx)(i.A,{refAction:d,name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:r.A,onClick:t}),a&&(0,s.jsx)(i.A,{refAction:o,name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:l.A,onClick:a})]})}function c(e){let{children:t,create:a,update:n,refUpdate:r,refCreate:l}=e;return(0,s.jsxs)("div",{className:o.editText,children:[t,(0,s.jsx)(d,{create:a,update:n,refUpdate:r,refCreate:l})]})}},1818:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);const o={textArea:"TextArea_textArea__W74x1",textColor:"TextArea_textColor__B5yhy"};var n=a(579);function r(e){let{value:t,onChange:a,readOnly:r}=e;return(0,n.jsx)("textarea",{className:`${o.textArea} ${r?o.textColor:""}`,value:t,onChange:e=>a(e.target.value),disabled:r})}},3936:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var o=a(5043);const n={dialog:"Goal_dialog__jFGMl",pomoshnik:"Goal_pomoshnik__ePQSy",iconBack:"Goal_iconBack__Wc5Bu",search:"Goal_search__xHdG5",spanPomoshnik:"Goal_spanPomoshnik__1NtI2",one:"Goal_one__7wuA8",two:"Goal_two__uTpyB",three:"Goal_three__P+Ews",five:"Goal_five__qptc-",seven:"Goal_seven__j53Uu",sixth:"Goal_sixth__z-DOL",iconAdd:"Goal_iconAdd__oG8az",iconSave:"Goal_iconSave__LCDA6",iconPrint:"Goal_iconPrint__vNzpB",image:"Goal_image__vr7vE",blockSelect:"Goal_blockSelect__DBPoO",option:"Goal_option__Me0cN",four:"Goal_four__gOlJn",main:"Goal_main__VnTVT",editorContainer:"Goal_editorContainer__b0ruq",deleteIcon:"Goal_deleteIcon__Y7frA",add:"Goal_add__uWAZJ",nameButton:"Goal_nameButton__yaggP",highlight:"Goal_highlight__nxbMd",selectImage:"Goal_selectImage__ya+Eg",select:"Goal_select__za4Ho"};const r=a.p+"static/media/drag.a3c69099094630ca6a8f439730092be5.svg";const l=a.p+"static/media/delete.02346ff21208123530a54256266a1dcc.svg";var i=a(6537),s=a(71),d=a(9742),c=a(1818),u=a(7422),_=a(1268),g=a(8877),p=a(839),x=a(4863),h=a(4293),f=a(579);function v(){var e,t,a,v,G,m,j,A,C,L;const[E,w]=(0,o.useState)([]),k=(0,o.useRef)(null),y=(0,o.useRef)(null),b=(0,o.useRef)(null),B=(0,o.useRef)(null),[S,N]=(0,o.useState)(!1),P=[{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",target:()=>B.current},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a",description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438",target:()=>E.length>0?k.current:null,disabled:!E.length},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",description:"\u0423\u0434\u0430\u043b\u0438\u0442\u0435 \u0447\u0430\u0441\u044c \u0446\u0435\u043b\u0438",target:()=>E.length>0?y.current:null,disabled:!E.length},{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",description:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438",target:()=>b.current}].filter((e=>!e.disabled)),{reduxSelectedOrganizationId:M,currentGoal:I,isErrorGetGoal:U,isLoadingGetGoal:O,isFetchingGetGoal:R,updateGoal:T,isLoadingUpdateGoalMutation:z,isSuccessUpdateGoalMutation:H,isErrorUpdateGoalMutation:F,ErrorUpdateGoalMutation:J,localIsResponseUpdateGoalMutation:D,postGoal:V,isLoadingPostGoalMutation:W,isSuccessPostGoalMutation:Y,isErrorPostGoalMutation:Z,ErrorPostGoalMutation:$,localIsResponsePostGoalMutation:q}=(0,g.uE)(),K=()=>{Object.keys(I).length>0?w((e=>[...e,[""]])):(async()=>{await V({content:[""],organizationId:M}).unwrap().then().catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})()};return(0,o.useEffect)((()=>{I.id&&w(I.content)}),[I]),(0,o.useEffect)((()=>{const e=e=>{"Enter"===e.key&&e.ctrlKey&&K()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),(0,f.jsxs)("div",{className:n.dialog,children:[(0,f.jsx)(u.A,{name:"\u0446\u0435\u043b\u0438",funcActiveHint:()=>N(!0),children:(0,f.jsx)(_.A,{update:async()=>{await T({_id:I.id,content:E}).unwrap().then((()=>{})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},refUpdate:B})}),(0,f.jsxs)("div",{className:n.main,children:[(0,f.jsx)(p.Ay,{locale:h.A,children:(0,f.jsx)(x.A,{open:S,onClose:()=>N(!1),steps:P})}),U?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.A,{Error:U})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.A,{Loading:O,Fetching:R}),(0,f.jsx)(d.JY,{onDragEnd:e=>{const{source:t,destination:a}=e;if(!a)return;const o=Array.from(E),[n]=o.splice(t.index,1);o.splice(a.index,0,n),w(o)},children:(0,f.jsx)(d.gL,{droppableId:"editorList",children:e=>(0,f.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:n.droppableContainer,children:[E.map(((e,t)=>(0,f.jsx)(d.sx,{draggableId:`item-${t}`,index:t,children:a=>(0,f.jsxs)("div",{ref:a.innerRef,...a.draggableProps,className:n.editorContainer,children:[(0,f.jsx)("div",{...a.dragHandleProps,className:n.dragHandle,children:(0,f.jsx)("img",{ref:k,src:r,alt:"drag"})}),(0,f.jsx)(c.A,{value:e,onChange:e=>{const a=[...E];a[t]=e,w(a)}},t),(0,f.jsx)("img",{ref:y,src:l,alt:"deleteImage",className:n.deleteIcon,onClick:()=>(e=>{w((t=>{const a=[...t];return a.splice(e,1),a}))})(t)})]})},t))),e.placeholder]})})}),(0,f.jsxs)("button",{ref:b,className:n.add,onClick:()=>K(),children:[(0,f.jsxs)("svg",{width:"19.998047",height:"20.000000",viewBox:"0 0 19.998 20",fill:"none",children:[(0,f.jsx)("defs",{}),(0,f.jsx)("path",{id:"Vector",d:"M10 20C4.47 19.99 0 15.52 0 10L0 9.8C0.1 4.3 4.63 -0.08 10.13 0C15.62 0.07 20.03 4.56 19.99 10.06C19.96 15.56 15.49 19.99 10 20ZM5 9L5 11L9 11L9 15L11 15L11 11L15 11L15 9L11 9L11 5L9 5L9 9L5 9Z",fill:"#B4B4B4","fill-opacity":"1.000000","fill-rule":"nonzero"})]}),(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:n.nameButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438 (Ctrl+Enter)"})})]}),(0,f.jsx)(i.A,{Loading:z,Error:F&&D,Success:H&&D,textSuccess:"\u0426\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==J&&void 0!==J&&null!==(e=J.data)&&void 0!==e&&null!==(t=e.errors)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&null!==(v=a.errors)&&void 0!==v&&v[0]?J.data.errors[0].errors[0]:null===J||void 0===J||null===(G=J.data)||void 0===G?void 0:G.message}),(0,f.jsx)(i.A,{Loading:W,Error:Z&&q,Success:Y&&q,textSuccess:"\u0426\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==$&&void 0!==$&&null!==(m=$.data)&&void 0!==m&&null!==(j=m.errors)&&void 0!==j&&null!==(A=j[0])&&void 0!==A&&null!==(C=A.errors)&&void 0!==C&&C[0]?$.data.errors[0].errors[0]:null===$||void 0===$||null===(L=$.data)||void 0===L?void 0:L.message})]})]})]})}}}]);
//# sourceMappingURL=936.5ad8d94d.chunk.js.map